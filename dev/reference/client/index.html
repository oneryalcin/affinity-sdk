
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Strongly-typed Python SDK for the Affinity CRM API">
      
      
      
      
        <link rel="prev" href="../../troubleshooting/">
      
      
        <link rel="next" href="../exceptions/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Client - Affinity Python SDK</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#client" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Affinity Python SDK" class="md-header__button md-logo" aria-label="Affinity Python SDK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Affinity Python SDK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Client
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/yaniv-golan/affinity-sdk" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Affinity Python SDK" class="md-nav__button md-logo" aria-label="Affinity Python SDK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Affinity Python SDK
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/yaniv-golan/affinity-sdk" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    CLI
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    CLI
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/scripting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scripting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JSON Output Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AI Integrations
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    AI Integrations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-integrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCP Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/claude-code-plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Claude Code Plugins & Skills
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Performance tuning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/api-versions-and-routing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API versions & routing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/pagination/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pagination
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/errors-and-retries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Errors & retries
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/rate-limits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rate limits
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/filtering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filtering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/query-command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Query command
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/datetime-handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Datetime handling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/csv-export/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CSV Export (CLI)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/field-types-and-values/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Field types & values
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/field-values/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Field values
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/ids-and-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IDs & types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/sync-vs-async/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sync vs async
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/debugging-hooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Debugging hooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/webhooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Webhooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/opportunity-associations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Opportunity associations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" checked>
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Client
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Client
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#affinity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Affinity
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Affinity
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.auth" class="md-nav__link">
    <span class="md-ellipsis">
      
        auth
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.companies" class="md-nav__link">
    <span class="md-ellipsis">
      
        companies
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.field_value_changes" class="md-nav__link">
    <span class="md-ellipsis">
      
        field_value_changes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.field_values" class="md-nav__link">
    <span class="md-ellipsis">
      
        field_values
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        fields
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.files" class="md-nav__link">
    <span class="md-ellipsis">
      
        files
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.interactions" class="md-nav__link">
    <span class="md-ellipsis">
      
        interactions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.lists" class="md-nav__link">
    <span class="md-ellipsis">
      
        lists
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.notes" class="md-nav__link">
    <span class="md-ellipsis">
      
        notes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.opportunities" class="md-nav__link">
    <span class="md-ellipsis">
      
        opportunities
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.persons" class="md-nav__link">
    <span class="md-ellipsis">
      
        persons
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.rate_limits" class="md-nav__link">
    <span class="md-ellipsis">
      
        rate_limits
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.relationships" class="md-nav__link">
    <span class="md-ellipsis">
      
        relationships
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.reminders" class="md-nav__link">
    <span class="md-ellipsis">
      
        reminders
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.tasks" class="md-nav__link">
    <span class="md-ellipsis">
      
        tasks
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.webhooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        webhooks
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.__del__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __del__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.clear_cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        clear_cache
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.close" class="md-nav__link">
    <span class="md-ellipsis">
      
        close
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.from_env" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_env
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.whoami" class="md-nav__link">
    <span class="md-ellipsis">
      
        whoami
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asyncaffinity" class="md-nav__link">
    <span class="md-ellipsis">
      
        AsyncAffinity
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity" class="md-nav__link">
    <span class="md-ellipsis">
      
        AsyncAffinity
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.auth" class="md-nav__link">
    <span class="md-ellipsis">
      
        auth
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.companies" class="md-nav__link">
    <span class="md-ellipsis">
      
        companies
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.field_value_changes" class="md-nav__link">
    <span class="md-ellipsis">
      
        field_value_changes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.field_values" class="md-nav__link">
    <span class="md-ellipsis">
      
        field_values
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        fields
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.files" class="md-nav__link">
    <span class="md-ellipsis">
      
        files
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.interactions" class="md-nav__link">
    <span class="md-ellipsis">
      
        interactions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.lists" class="md-nav__link">
    <span class="md-ellipsis">
      
        lists
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.notes" class="md-nav__link">
    <span class="md-ellipsis">
      
        notes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.opportunities" class="md-nav__link">
    <span class="md-ellipsis">
      
        opportunities
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.persons" class="md-nav__link">
    <span class="md-ellipsis">
      
        persons
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.rate_limits" class="md-nav__link">
    <span class="md-ellipsis">
      
        rate_limits
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.relationships" class="md-nav__link">
    <span class="md-ellipsis">
      
        relationships
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.reminders" class="md-nav__link">
    <span class="md-ellipsis">
      
        reminders
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.tasks" class="md-nav__link">
    <span class="md-ellipsis">
      
        tasks
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.webhooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        webhooks
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.__aenter__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __aenter__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.__aexit__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __aexit__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.__del__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __del__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.clear_cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        clear_cache
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.close" class="md-nav__link">
    <span class="md-ellipsis">
      
        close
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.from_env" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_env
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.whoami" class="md-nav__link">
    <span class="md-ellipsis">
      
        whoami
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exceptions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../query-language/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Query Language
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_7" >
        
          
          <label class="md-nav__link" for="__nav_10_7" id="__nav_10_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Services
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Services
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/companies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Companies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/persons/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Persons
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/opportunities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Opportunities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tasks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_7_6" >
        
          
          <label class="md-nav__link" for="__nav_10_7_6" id="__nav_10_7_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    V1 endpoints
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_10_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_7_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    V1 endpoints
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/reminders/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reminders
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/webhooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Webhooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/interactions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interactions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/fields/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fields
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/field-values/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Field values
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Files
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/relationships/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Relationships
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Auth
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#affinity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Affinity
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Affinity
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.auth" class="md-nav__link">
    <span class="md-ellipsis">
      
        auth
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.companies" class="md-nav__link">
    <span class="md-ellipsis">
      
        companies
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.field_value_changes" class="md-nav__link">
    <span class="md-ellipsis">
      
        field_value_changes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.field_values" class="md-nav__link">
    <span class="md-ellipsis">
      
        field_values
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        fields
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.files" class="md-nav__link">
    <span class="md-ellipsis">
      
        files
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.interactions" class="md-nav__link">
    <span class="md-ellipsis">
      
        interactions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.lists" class="md-nav__link">
    <span class="md-ellipsis">
      
        lists
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.notes" class="md-nav__link">
    <span class="md-ellipsis">
      
        notes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.opportunities" class="md-nav__link">
    <span class="md-ellipsis">
      
        opportunities
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.persons" class="md-nav__link">
    <span class="md-ellipsis">
      
        persons
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.rate_limits" class="md-nav__link">
    <span class="md-ellipsis">
      
        rate_limits
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.relationships" class="md-nav__link">
    <span class="md-ellipsis">
      
        relationships
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.reminders" class="md-nav__link">
    <span class="md-ellipsis">
      
        reminders
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.tasks" class="md-nav__link">
    <span class="md-ellipsis">
      
        tasks
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.webhooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        webhooks
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.__del__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __del__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.clear_cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        clear_cache
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.close" class="md-nav__link">
    <span class="md-ellipsis">
      
        close
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.from_env" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_env
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.Affinity.whoami" class="md-nav__link">
    <span class="md-ellipsis">
      
        whoami
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asyncaffinity" class="md-nav__link">
    <span class="md-ellipsis">
      
        AsyncAffinity
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity" class="md-nav__link">
    <span class="md-ellipsis">
      
        AsyncAffinity
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.auth" class="md-nav__link">
    <span class="md-ellipsis">
      
        auth
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.companies" class="md-nav__link">
    <span class="md-ellipsis">
      
        companies
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.field_value_changes" class="md-nav__link">
    <span class="md-ellipsis">
      
        field_value_changes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.field_values" class="md-nav__link">
    <span class="md-ellipsis">
      
        field_values
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        fields
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.files" class="md-nav__link">
    <span class="md-ellipsis">
      
        files
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.interactions" class="md-nav__link">
    <span class="md-ellipsis">
      
        interactions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.lists" class="md-nav__link">
    <span class="md-ellipsis">
      
        lists
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.notes" class="md-nav__link">
    <span class="md-ellipsis">
      
        notes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.opportunities" class="md-nav__link">
    <span class="md-ellipsis">
      
        opportunities
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.persons" class="md-nav__link">
    <span class="md-ellipsis">
      
        persons
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.rate_limits" class="md-nav__link">
    <span class="md-ellipsis">
      
        rate_limits
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.relationships" class="md-nav__link">
    <span class="md-ellipsis">
      
        relationships
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.reminders" class="md-nav__link">
    <span class="md-ellipsis">
      
        reminders
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.tasks" class="md-nav__link">
    <span class="md-ellipsis">
      
        tasks
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.webhooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        webhooks
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.__aenter__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __aenter__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.__aexit__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __aexit__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.__del__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __del__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.clear_cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        clear_cache
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.close" class="md-nav__link">
    <span class="md-ellipsis">
      
        close
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.from_env" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_env
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.AsyncAffinity.whoami" class="md-nav__link">
    <span class="md-ellipsis">
      
        whoami
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="client">Client<a class="headerlink" href="#client" title="Permanent link">&para;</a></h1>
<h2 id="affinity"><code>Affinity</code><a class="headerlink" href="#affinity" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<a id="affinity.Affinity"></a>
    <div class="doc doc-contents first">



        <p>Synchronous Affinity API client.</p>
<p>Provides access to all Affinity API functionality with a clean,
Pythonic interface. Uses V2 API where available, falls back to V1
for operations not yet supported in V2.</p>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">affinity</span><span class="w"> </span><span class="kn">import</span> <span class="n">Affinity</span>

<span class="c1"># Initialize with API key</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">Affinity</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;your-api-key&quot;</span><span class="p">)</span>

<span class="c1"># Use as context manager for automatic cleanup</span>
<span class="k">with</span> <span class="n">Affinity</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;your-api-key&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="c1"># Get all companies</span>
    <span class="k">for</span> <span class="n">company</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">companies</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">company</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="c1"># Get a specific person with field data</span>
    <span class="n">person</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">persons</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="n">PersonId</span><span class="p">(</span><span class="mi">12345</span><span class="p">),</span>
        <span class="n">field_types</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;enriched&quot;</span><span class="p">,</span> <span class="s2">&quot;global&quot;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Add a company to a list</span>
    <span class="n">entries</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">lists</span><span class="o">.</span><span class="n">entries</span><span class="p">(</span><span class="n">ListId</span><span class="p">(</span><span class="mi">789</span><span class="p">))</span>
    <span class="n">entry</span> <span class="o">=</span> <span class="n">entries</span><span class="o">.</span><span class="n">add_company</span><span class="p">(</span><span class="n">CompanyId</span><span class="p">(</span><span class="mi">456</span><span class="p">))</span>

    <span class="c1"># Update field values</span>
    <span class="n">entries</span><span class="o">.</span><span class="n">update_field_value</span><span class="p">(</span>
        <span class="n">entry</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">FieldId</span><span class="p">(</span><span class="mi">101</span><span class="p">),</span>
        <span class="s2">&quot;New value&quot;</span>
    <span class="p">)</span>
</code></pre></div>
</details>

<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="companies: CompanyService

  
      property
   (affinity.Affinity.companies)" href="#affinity.Affinity.companies">companies</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="affinity.services.companies.CompanyService" href="../services/companies/#affinity.services.companies.CompanyService">CompanyService</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Company (organization) operations</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="persons: PersonService

  
      property
   (affinity.Affinity.persons)" href="#affinity.Affinity.persons">persons</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="affinity.services.persons.PersonService" href="../services/persons/#affinity.services.persons.PersonService">PersonService</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Person (contact) operations</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="lists: ListService

  
      property
   (affinity.Affinity.lists)" href="#affinity.Affinity.lists">lists</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="affinity.services.lists.ListService" href="../services/lists/#affinity.services.lists.ListService">ListService</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List operations</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="notes: NoteService

  
      property
   (affinity.Affinity.notes)" href="#affinity.Affinity.notes">notes</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="affinity.services.v1_only.NoteService" href="../services/v1/notes/#affinity.services.v1_only.NoteService">NoteService</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Note operations</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="reminders: ReminderService

  
      property
   (affinity.Affinity.reminders)" href="#affinity.Affinity.reminders">reminders</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="affinity.services.v1_only.ReminderService" href="../services/v1/reminders/#affinity.services.v1_only.ReminderService">ReminderService</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reminder operations</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="webhooks: WebhookService

  
      property
   (affinity.Affinity.webhooks)" href="#affinity.Affinity.webhooks">webhooks</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="affinity.services.v1_only.WebhookService" href="../services/v1/webhooks/#affinity.services.v1_only.WebhookService">WebhookService</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Webhook subscription operations</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="interactions: InteractionService

  
      property
   (affinity.Affinity.interactions)" href="#affinity.Affinity.interactions">interactions</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="affinity.services.v1_only.InteractionService" href="../services/v1/interactions/#affinity.services.v1_only.InteractionService">InteractionService</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Interaction (email, meeting, etc.) operations</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="fields: FieldService

  
      property
   (affinity.Affinity.fields)" href="#affinity.Affinity.fields">fields</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="affinity.services.v1_only.FieldService" href="../services/v1/fields/#affinity.services.v1_only.FieldService">FieldService</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Custom field operations</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="field_values: FieldValueService

  
      property
   (affinity.Affinity.field_values)" href="#affinity.Affinity.field_values">field_values</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="affinity.services.v1_only.FieldValueService" href="../services/v1/field-values/#affinity.services.v1_only.FieldValueService">FieldValueService</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Field value operations</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="field_value_changes: FieldValueChangesService

  
      property
   (affinity.Affinity.field_value_changes)" href="#affinity.Affinity.field_value_changes">field_value_changes</a></code></td>
            <td>
                  <code><span title="affinity.services.v1_only.FieldValueChangesService">FieldValueChangesService</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Field value change history operations</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="files: EntityFileService

  
      property
   (affinity.Affinity.files)" href="#affinity.Affinity.files">files</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="affinity.services.v1_only.EntityFileService" href="../services/v1/files/#affinity.services.v1_only.EntityFileService">EntityFileService</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Entity file operations</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="relationships: RelationshipStrengthService

  
      property
   (affinity.Affinity.relationships)" href="#affinity.Affinity.relationships">relationships</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="affinity.services.v1_only.RelationshipStrengthService" href="../services/v1/relationships/#affinity.services.v1_only.RelationshipStrengthService">RelationshipStrengthService</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Relationship strength queries</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="auth: AuthService

  
      property
   (affinity.Affinity.auth)" href="#affinity.Affinity.auth">auth</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="affinity.services.v1_only.AuthService" href="../services/v1/auth/#affinity.services.v1_only.AuthService">AuthService</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication and rate limit info</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>affinity/client.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Affinity</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Synchronous Affinity API client.</span>

<span class="sd">    Provides access to all Affinity API functionality with a clean,</span>
<span class="sd">    Pythonic interface. Uses V2 API where available, falls back to V1</span>
<span class="sd">    for operations not yet supported in V2.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from affinity import Affinity</span>

<span class="sd">        # Initialize with API key</span>
<span class="sd">        client = Affinity(api_key=&quot;your-api-key&quot;)</span>

<span class="sd">        # Use as context manager for automatic cleanup</span>
<span class="sd">        with Affinity(api_key=&quot;your-api-key&quot;) as client:</span>
<span class="sd">            # Get all companies</span>
<span class="sd">            for company in client.companies.all():</span>
<span class="sd">                print(company.name)</span>

<span class="sd">            # Get a specific person with field data</span>
<span class="sd">            person = client.persons.get(</span>
<span class="sd">                PersonId(12345),</span>
<span class="sd">                field_types=[&quot;enriched&quot;, &quot;global&quot;]</span>
<span class="sd">            )</span>

<span class="sd">            # Add a company to a list</span>
<span class="sd">            entries = client.lists.entries(ListId(789))</span>
<span class="sd">            entry = entries.add_company(CompanyId(456))</span>

<span class="sd">            # Update field values</span>
<span class="sd">            entries.update_field_value(</span>
<span class="sd">                entry.id,</span>
<span class="sd">                FieldId(101),</span>
<span class="sd">                &quot;New value&quot;</span>
<span class="sd">            )</span>
<span class="sd">        ```</span>

<span class="sd">    Attributes:</span>
<span class="sd">        companies: Company (organization) operations</span>
<span class="sd">        persons: Person (contact) operations</span>
<span class="sd">        lists: List operations</span>
<span class="sd">        notes: Note operations</span>
<span class="sd">        reminders: Reminder operations</span>
<span class="sd">        webhooks: Webhook subscription operations</span>
<span class="sd">        interactions: Interaction (email, meeting, etc.) operations</span>
<span class="sd">        fields: Custom field operations</span>
<span class="sd">        field_values: Field value operations</span>
<span class="sd">        field_value_changes: Field value change history operations</span>
<span class="sd">        files: Entity file operations</span>
<span class="sd">        relationships: Relationship strength queries</span>
<span class="sd">        auth: Authentication and rate limit info</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">v1_base_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">V1_BASE_URL</span><span class="p">,</span>
        <span class="n">v2_base_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">V2_BASE_URL</span><span class="p">,</span>
        <span class="n">v1_auth_mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;bearer&quot;</span><span class="p">,</span> <span class="s2">&quot;basic&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bearer&quot;</span><span class="p">,</span>
        <span class="n">transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">BaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">async_transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncBaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enable_beta_endpoints</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">allow_insecure_download_redirects</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">expected_v2_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">30.0</span><span class="p">,</span>
        <span class="n">max_retries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
        <span class="n">enable_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">cache_ttl</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
        <span class="n">log_requests</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">on_request</span><span class="p">:</span> <span class="n">RequestHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">on_response</span><span class="p">:</span> <span class="n">ResponseHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">on_error</span><span class="p">:</span> <span class="n">ErrorHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">on_event</span><span class="p">:</span> <span class="n">AnyEventHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">hook_error_policy</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;swallow&quot;</span><span class="p">,</span> <span class="s2">&quot;raise&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;swallow&quot;</span><span class="p">,</span>
        <span class="n">policies</span><span class="p">:</span> <span class="n">Policies</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the Affinity client.</span>

<span class="sd">        Args:</span>
<span class="sd">            api_key: Your Affinity API key</span>
<span class="sd">            v1_base_url: V1 API base URL (default: https://api.affinity.co)</span>
<span class="sd">            v2_base_url: V2 API base URL (default: https://api.affinity.co/v2)</span>
<span class="sd">            v1_auth_mode: Auth mode for V1 API (&quot;bearer&quot; or &quot;basic&quot;)</span>
<span class="sd">            transport: Optional `httpx` transport (advanced; useful for mocking in tests)</span>
<span class="sd">            async_transport: Optional async `httpx` transport (advanced; useful for mocking in</span>
<span class="sd">                tests)</span>
<span class="sd">            enable_beta_endpoints: Enable beta V2 endpoints</span>
<span class="sd">            allow_insecure_download_redirects: Allow `http://` redirects for file downloads.</span>
<span class="sd">                Not recommended; prefer HTTPS-only downloads.</span>
<span class="sd">            expected_v2_version: Expected V2 API version for diagnostics (e.g.,</span>
<span class="sd">                &quot;2024-01-01&quot;). Used to detect version compatibility issues.</span>
<span class="sd">                See TR-015.</span>
<span class="sd">            timeout: Request timeout in seconds</span>
<span class="sd">            max_retries: Maximum retries for rate-limited requests</span>
<span class="sd">            enable_cache: Enable response caching for field metadata</span>
<span class="sd">            cache_ttl: Cache TTL in seconds</span>
<span class="sd">            log_requests: Log all HTTP requests (for debugging)</span>
<span class="sd">            on_request: Hook called before each request (DX-008)</span>
<span class="sd">            on_response: Hook called after each response (DX-008)</span>
<span class="sd">            on_error: Hook called when a request raises (DX-008)</span>
<span class="sd">            on_event: Event hook called for request/response lifecycle events (DX-008)</span>
<span class="sd">            hook_error_policy: What to do if hooks raise (&quot;swallow&quot; or &quot;raise&quot;)</span>
<span class="sd">            policies: Client policies (e.g., disable writes)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">ClientConfig</span><span class="p">(</span>
            <span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span>
            <span class="n">v1_base_url</span><span class="o">=</span><span class="n">v1_base_url</span><span class="p">,</span>
            <span class="n">v2_base_url</span><span class="o">=</span><span class="n">v2_base_url</span><span class="p">,</span>
            <span class="n">v1_auth_mode</span><span class="o">=</span><span class="n">v1_auth_mode</span><span class="p">,</span>
            <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span>
            <span class="n">async_transport</span><span class="o">=</span><span class="n">async_transport</span><span class="p">,</span>
            <span class="n">enable_beta_endpoints</span><span class="o">=</span><span class="n">enable_beta_endpoints</span><span class="p">,</span>
            <span class="n">allow_insecure_download_redirects</span><span class="o">=</span><span class="n">allow_insecure_download_redirects</span><span class="p">,</span>
            <span class="n">expected_v2_version</span><span class="o">=</span><span class="n">expected_v2_version</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
            <span class="n">max_retries</span><span class="o">=</span><span class="n">max_retries</span><span class="p">,</span>
            <span class="n">enable_cache</span><span class="o">=</span><span class="n">enable_cache</span><span class="p">,</span>
            <span class="n">cache_ttl</span><span class="o">=</span><span class="n">cache_ttl</span><span class="p">,</span>
            <span class="n">log_requests</span><span class="o">=</span><span class="n">log_requests</span><span class="p">,</span>
            <span class="n">on_request</span><span class="o">=</span><span class="n">on_request</span><span class="p">,</span>
            <span class="n">on_response</span><span class="o">=</span><span class="n">on_response</span><span class="p">,</span>
            <span class="n">on_error</span><span class="o">=</span><span class="n">on_error</span><span class="p">,</span>
            <span class="n">on_event</span><span class="o">=</span><span class="n">on_event</span><span class="p">,</span>
            <span class="n">hook_error_policy</span><span class="o">=</span><span class="n">hook_error_policy</span><span class="p">,</span>
            <span class="n">policies</span><span class="o">=</span><span class="n">policies</span> <span class="ow">or</span> <span class="n">Policies</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_http</span> <span class="o">=</span> <span class="n">HTTPClient</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

        <span class="c1"># Resource management tracking</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entered_context</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># Initialize services</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_companies</span><span class="p">:</span> <span class="n">CompanyService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_persons</span><span class="p">:</span> <span class="n">PersonService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lists</span><span class="p">:</span> <span class="n">ListService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_opportunities</span><span class="p">:</span> <span class="n">OpportunityService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span><span class="p">:</span> <span class="n">TaskService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_notes</span><span class="p">:</span> <span class="n">NoteService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reminders</span><span class="p">:</span> <span class="n">ReminderService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_webhooks</span><span class="p">:</span> <span class="n">WebhookService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interactions</span><span class="p">:</span> <span class="n">InteractionService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span><span class="p">:</span> <span class="n">FieldService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_field_values</span><span class="p">:</span> <span class="n">FieldValueService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_field_value_changes</span><span class="p">:</span> <span class="n">FieldValueChangesService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_files</span><span class="p">:</span> <span class="n">EntityFileService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_relationships</span><span class="p">:</span> <span class="n">RelationshipStrengthService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_auth</span><span class="p">:</span> <span class="n">AuthService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rate_limits</span><span class="p">:</span> <span class="n">RateLimitService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_env</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">env_var</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">_DEFAULT_API_KEY_ENV_VAR</span><span class="p">,</span>
        <span class="n">load_dotenv</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">dotenv_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dotenv_override</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">BaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">async_transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncBaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">policies</span><span class="p">:</span> <span class="n">Policies</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">on_event</span><span class="p">:</span> <span class="n">AnyEventHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">hook_error_policy</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;swallow&quot;</span><span class="p">,</span> <span class="s2">&quot;raise&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;swallow&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Affinity</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a client using an API key from the environment.</span>

<span class="sd">        By default, reads `AFFINITY_API_KEY`. For local development, you can optionally</span>
<span class="sd">        load a `.env` file (requires `python-dotenv`).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">api_key</span> <span class="o">=</span> <span class="n">_api_key_from_env</span><span class="p">(</span>
            <span class="n">env_var</span><span class="o">=</span><span class="n">env_var</span><span class="p">,</span>
            <span class="n">load_dotenv</span><span class="o">=</span><span class="n">load_dotenv</span><span class="p">,</span>
            <span class="n">dotenv_path</span><span class="o">=</span><span class="n">dotenv_path</span><span class="p">,</span>
            <span class="n">dotenv_override</span><span class="o">=</span><span class="n">dotenv_override</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span>
            <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span>
            <span class="n">async_transport</span><span class="o">=</span><span class="n">async_transport</span><span class="p">,</span>
            <span class="n">policies</span><span class="o">=</span><span class="n">policies</span><span class="p">,</span>
            <span class="n">on_event</span><span class="o">=</span><span class="n">on_event</span><span class="p">,</span>
            <span class="n">hook_error_policy</span><span class="o">=</span><span class="n">hook_error_policy</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Affinity</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entered_context</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Close the HTTP client and release resources.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Warn if client was not properly closed.&quot;&quot;&quot;</span>
        <span class="c1"># Use getattr to handle case where __init__ failed before setting _closed</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_closed&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_entered_context&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;Affinity client was not closed. &quot;</span>
                <span class="s2">&quot;Use &#39;with Affinity.from_env() as client:&#39; &quot;</span>
                <span class="s2">&quot;or call client.close() when done.&quot;</span><span class="p">,</span>
                <span class="ne">ResourceWarning</span><span class="p">,</span>
                <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="c1"># Still close to prevent actual resource leaks</span>
            <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="c1"># =========================================================================</span>
    <span class="c1"># Service Properties (lazy initialization)</span>
    <span class="c1"># =========================================================================</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">companies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CompanyService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Company (organization) operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_companies</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_companies</span> <span class="o">=</span> <span class="n">CompanyService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_companies</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">persons</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PersonService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Person (contact) operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_persons</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_persons</span> <span class="o">=</span> <span class="n">PersonService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_persons</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">lists</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ListService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lists</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lists</span> <span class="o">=</span> <span class="n">ListService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lists</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">opportunities</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OpportunityService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Opportunity operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_opportunities</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_opportunities</span> <span class="o">=</span> <span class="n">OpportunityService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_opportunities</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Long-running task operations (polling, waiting).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span> <span class="o">=</span> <span class="n">TaskService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">notes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoteService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Note operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_notes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_notes</span> <span class="o">=</span> <span class="n">NoteService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_notes</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">reminders</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ReminderService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reminder operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reminders</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reminders</span> <span class="o">=</span> <span class="n">ReminderService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reminders</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">webhooks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WebhookService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Webhook subscription operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_webhooks</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_webhooks</span> <span class="o">=</span> <span class="n">WebhookService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_webhooks</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">interactions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">InteractionService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Interaction operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interactions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_interactions</span> <span class="o">=</span> <span class="n">InteractionService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interactions</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">fields</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Custom field operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span> <span class="o">=</span> <span class="n">FieldService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">field_values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldValueService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field value operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_field_values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_field_values</span> <span class="o">=</span> <span class="n">FieldValueService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_field_values</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">field_value_changes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldValueChangesService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field value change history queries.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_field_value_changes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_field_value_changes</span> <span class="o">=</span> <span class="n">FieldValueChangesService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_field_value_changes</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityFileService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Entity file operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_files</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_files</span> <span class="o">=</span> <span class="n">EntityFileService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_files</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">relationships</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RelationshipStrengthService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Relationship strength queries.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relationships</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_relationships</span> <span class="o">=</span> <span class="n">RelationshipStrengthService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relationships</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">auth</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AuthService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Authentication info.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auth</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_auth</span> <span class="o">=</span> <span class="n">AuthService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auth</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">rate_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RateLimitService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Unified rate limit information (version-agnostic).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rate_limits</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rate_limits</span> <span class="o">=</span> <span class="n">RateLimitService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rate_limits</span>

    <span class="c1"># =========================================================================</span>
    <span class="c1"># Utility Methods</span>
    <span class="c1"># =========================================================================</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the response cache.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">cache</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">whoami</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WhoAmI</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convenience wrapper for `client.auth.whoami()`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">whoami</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h2 id="affinity.Affinity.auth" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">auth</span><span class="p">:</span> <span class="n">AuthService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.Affinity.auth" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Authentication info.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.Affinity.companies" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">companies</span><span class="p">:</span> <span class="n">CompanyService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.Affinity.companies" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Company (organization) operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.Affinity.field_value_changes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">field_value_changes</span><span class="p">:</span> <span class="n">FieldValueChangesService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.Affinity.field_value_changes" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Field value change history queries.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.Affinity.field_values" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">field_values</span><span class="p">:</span> <span class="n">FieldValueService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.Affinity.field_values" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Field value operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.Affinity.fields" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fields</span><span class="p">:</span> <span class="n">FieldService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.Affinity.fields" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Custom field operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.Affinity.files" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">files</span><span class="p">:</span> <span class="n">EntityFileService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.Affinity.files" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Entity file operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.Affinity.interactions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">interactions</span><span class="p">:</span> <span class="n">InteractionService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.Affinity.interactions" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Interaction operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.Affinity.lists" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">lists</span><span class="p">:</span> <span class="n">ListService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.Affinity.lists" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>List operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.Affinity.notes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">notes</span><span class="p">:</span> <span class="n">NoteService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.Affinity.notes" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Note operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.Affinity.opportunities" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">opportunities</span><span class="p">:</span> <span class="n">OpportunityService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.Affinity.opportunities" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Opportunity operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.Affinity.persons" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">persons</span><span class="p">:</span> <span class="n">PersonService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.Affinity.persons" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Person (contact) operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.Affinity.rate_limits" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rate_limits</span><span class="p">:</span> <span class="n">RateLimitService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.Affinity.rate_limits" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Unified rate limit information (version-agnostic).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.Affinity.relationships" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">relationships</span><span class="p">:</span> <span class="n">RelationshipStrengthService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.Affinity.relationships" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Relationship strength queries.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.Affinity.reminders" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reminders</span><span class="p">:</span> <span class="n">ReminderService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.Affinity.reminders" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Reminder operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.Affinity.tasks" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">tasks</span><span class="p">:</span> <span class="n">TaskService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.Affinity.tasks" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Long-running task operations (polling, waiting).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.Affinity.webhooks" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">webhooks</span><span class="p">:</span> <span class="n">WebhookService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.Affinity.webhooks" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Webhook subscription operations.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h2 id="affinity.Affinity.__del__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__del__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#affinity.Affinity.__del__" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Warn if client was not properly closed.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Warn if client was not properly closed.&quot;&quot;&quot;</span>
    <span class="c1"># Use getattr to handle case where __init__ failed before setting _closed</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_closed&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_entered_context&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;Affinity client was not closed. &quot;</span>
            <span class="s2">&quot;Use &#39;with Affinity.from_env() as client:&#39; &quot;</span>
            <span class="s2">&quot;or call client.close() when done.&quot;</span><span class="p">,</span>
            <span class="ne">ResourceWarning</span><span class="p">,</span>
            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># Still close to prevent actual resource leaks</span>
        <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="affinity.Affinity.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">v1_base_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">V1_BASE_URL</span><span class="p">,</span> <span class="n">v2_base_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">V2_BASE_URL</span><span class="p">,</span> <span class="n">v1_auth_mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;bearer&#39;</span><span class="p">,</span> <span class="s1">&#39;basic&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bearer&#39;</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">BaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">async_transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncBaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">enable_beta_endpoints</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">allow_insecure_download_redirects</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">expected_v2_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">30.0</span><span class="p">,</span> <span class="n">max_retries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">enable_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">cache_ttl</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span> <span class="n">log_requests</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">on_request</span><span class="p">:</span> <span class="n">RequestHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">on_response</span><span class="p">:</span> <span class="n">ResponseHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">on_error</span><span class="p">:</span> <span class="n">ErrorHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">on_event</span><span class="p">:</span> <span class="n">AnyEventHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hook_error_policy</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;swallow&#39;</span><span class="p">,</span> <span class="s1">&#39;raise&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;swallow&#39;</span><span class="p">,</span> <span class="n">policies</span><span class="p">:</span> <span class="n">Policies</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

<a href="#affinity.Affinity.__init__" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Initialize the Affinity client.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>api_key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Your Affinity API key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>v1_base_url</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>V1 API base URL (default: https://api.affinity.co)</p>
              </div>
            </td>
            <td>
                  <code><span title="affinity.models.types.V1_BASE_URL">V1_BASE_URL</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>v2_base_url</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>V2 API base URL (default: https://api.affinity.co/v2)</p>
              </div>
            </td>
            <td>
                  <code><span title="affinity.models.types.V2_BASE_URL">V2_BASE_URL</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>v1_auth_mode</code>
            </td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;bearer&#39;, &#39;basic&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Auth mode for V1 API ("bearer" or "basic")</p>
              </div>
            </td>
            <td>
                  <code>&#39;bearer&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>transport</code>
            </td>
            <td>
                  <code><span title="httpx.BaseTransport">BaseTransport</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional <code>httpx</code> transport (advanced; useful for mocking in tests)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>async_transport</code>
            </td>
            <td>
                  <code><span title="httpx.AsyncBaseTransport">AsyncBaseTransport</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional async <code>httpx</code> transport (advanced; useful for mocking in
tests)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>enable_beta_endpoints</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Enable beta V2 endpoints</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>allow_insecure_download_redirects</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Allow <code>http://</code> redirects for file downloads.
Not recommended; prefer HTTPS-only downloads.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expected_v2_version</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Expected V2 API version for diagnostics (e.g.,
"2024-01-01"). Used to detect version compatibility issues.
See TR-015.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Request timeout in seconds</p>
              </div>
            </td>
            <td>
                  <code>30.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_retries</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum retries for rate-limited requests</p>
              </div>
            </td>
            <td>
                  <code>3</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>enable_cache</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Enable response caching for field metadata</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cache_ttl</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Cache TTL in seconds</p>
              </div>
            </td>
            <td>
                  <code>300.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>log_requests</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Log all HTTP requests (for debugging)</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>on_request</code>
            </td>
            <td>
                  <code><span title="affinity.hooks.RequestHook">RequestHook</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Hook called before each request (DX-008)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>on_response</code>
            </td>
            <td>
                  <code><span title="affinity.hooks.ResponseHook">ResponseHook</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Hook called after each response (DX-008)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>on_error</code>
            </td>
            <td>
                  <code><span title="affinity.hooks.ErrorHook">ErrorHook</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Hook called when a request raises (DX-008)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>on_event</code>
            </td>
            <td>
                  <code><span title="affinity.hooks.AnyEventHook">AnyEventHook</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Event hook called for request/response lifecycle events (DX-008)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hook_error_policy</code>
            </td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;swallow&#39;, &#39;raise&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>What to do if hooks raise ("swallow" or "raise")</p>
              </div>
            </td>
            <td>
                  <code>&#39;swallow&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>policies</code>
            </td>
            <td>
                  <code><span title="affinity.policies.Policies">Policies</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Client policies (e.g., disable writes)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">v1_base_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">V1_BASE_URL</span><span class="p">,</span>
    <span class="n">v2_base_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">V2_BASE_URL</span><span class="p">,</span>
    <span class="n">v1_auth_mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;bearer&quot;</span><span class="p">,</span> <span class="s2">&quot;basic&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bearer&quot;</span><span class="p">,</span>
    <span class="n">transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">BaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">async_transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncBaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_beta_endpoints</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">allow_insecure_download_redirects</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">expected_v2_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">30.0</span><span class="p">,</span>
    <span class="n">max_retries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">enable_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">cache_ttl</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
    <span class="n">log_requests</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">on_request</span><span class="p">:</span> <span class="n">RequestHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">on_response</span><span class="p">:</span> <span class="n">ResponseHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">on_error</span><span class="p">:</span> <span class="n">ErrorHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">on_event</span><span class="p">:</span> <span class="n">AnyEventHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hook_error_policy</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;swallow&quot;</span><span class="p">,</span> <span class="s2">&quot;raise&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;swallow&quot;</span><span class="p">,</span>
    <span class="n">policies</span><span class="p">:</span> <span class="n">Policies</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the Affinity client.</span>

<span class="sd">    Args:</span>
<span class="sd">        api_key: Your Affinity API key</span>
<span class="sd">        v1_base_url: V1 API base URL (default: https://api.affinity.co)</span>
<span class="sd">        v2_base_url: V2 API base URL (default: https://api.affinity.co/v2)</span>
<span class="sd">        v1_auth_mode: Auth mode for V1 API (&quot;bearer&quot; or &quot;basic&quot;)</span>
<span class="sd">        transport: Optional `httpx` transport (advanced; useful for mocking in tests)</span>
<span class="sd">        async_transport: Optional async `httpx` transport (advanced; useful for mocking in</span>
<span class="sd">            tests)</span>
<span class="sd">        enable_beta_endpoints: Enable beta V2 endpoints</span>
<span class="sd">        allow_insecure_download_redirects: Allow `http://` redirects for file downloads.</span>
<span class="sd">            Not recommended; prefer HTTPS-only downloads.</span>
<span class="sd">        expected_v2_version: Expected V2 API version for diagnostics (e.g.,</span>
<span class="sd">            &quot;2024-01-01&quot;). Used to detect version compatibility issues.</span>
<span class="sd">            See TR-015.</span>
<span class="sd">        timeout: Request timeout in seconds</span>
<span class="sd">        max_retries: Maximum retries for rate-limited requests</span>
<span class="sd">        enable_cache: Enable response caching for field metadata</span>
<span class="sd">        cache_ttl: Cache TTL in seconds</span>
<span class="sd">        log_requests: Log all HTTP requests (for debugging)</span>
<span class="sd">        on_request: Hook called before each request (DX-008)</span>
<span class="sd">        on_response: Hook called after each response (DX-008)</span>
<span class="sd">        on_error: Hook called when a request raises (DX-008)</span>
<span class="sd">        on_event: Event hook called for request/response lifecycle events (DX-008)</span>
<span class="sd">        hook_error_policy: What to do if hooks raise (&quot;swallow&quot; or &quot;raise&quot;)</span>
<span class="sd">        policies: Client policies (e.g., disable writes)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">ClientConfig</span><span class="p">(</span>
        <span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span>
        <span class="n">v1_base_url</span><span class="o">=</span><span class="n">v1_base_url</span><span class="p">,</span>
        <span class="n">v2_base_url</span><span class="o">=</span><span class="n">v2_base_url</span><span class="p">,</span>
        <span class="n">v1_auth_mode</span><span class="o">=</span><span class="n">v1_auth_mode</span><span class="p">,</span>
        <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span>
        <span class="n">async_transport</span><span class="o">=</span><span class="n">async_transport</span><span class="p">,</span>
        <span class="n">enable_beta_endpoints</span><span class="o">=</span><span class="n">enable_beta_endpoints</span><span class="p">,</span>
        <span class="n">allow_insecure_download_redirects</span><span class="o">=</span><span class="n">allow_insecure_download_redirects</span><span class="p">,</span>
        <span class="n">expected_v2_version</span><span class="o">=</span><span class="n">expected_v2_version</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
        <span class="n">max_retries</span><span class="o">=</span><span class="n">max_retries</span><span class="p">,</span>
        <span class="n">enable_cache</span><span class="o">=</span><span class="n">enable_cache</span><span class="p">,</span>
        <span class="n">cache_ttl</span><span class="o">=</span><span class="n">cache_ttl</span><span class="p">,</span>
        <span class="n">log_requests</span><span class="o">=</span><span class="n">log_requests</span><span class="p">,</span>
        <span class="n">on_request</span><span class="o">=</span><span class="n">on_request</span><span class="p">,</span>
        <span class="n">on_response</span><span class="o">=</span><span class="n">on_response</span><span class="p">,</span>
        <span class="n">on_error</span><span class="o">=</span><span class="n">on_error</span><span class="p">,</span>
        <span class="n">on_event</span><span class="o">=</span><span class="n">on_event</span><span class="p">,</span>
        <span class="n">hook_error_policy</span><span class="o">=</span><span class="n">hook_error_policy</span><span class="p">,</span>
        <span class="n">policies</span><span class="o">=</span><span class="n">policies</span> <span class="ow">or</span> <span class="n">Policies</span><span class="p">(),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_http</span> <span class="o">=</span> <span class="n">HTTPClient</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

    <span class="c1"># Resource management tracking</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_entered_context</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="c1"># Initialize services</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_companies</span><span class="p">:</span> <span class="n">CompanyService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_persons</span><span class="p">:</span> <span class="n">PersonService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_lists</span><span class="p">:</span> <span class="n">ListService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_opportunities</span><span class="p">:</span> <span class="n">OpportunityService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span><span class="p">:</span> <span class="n">TaskService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_notes</span><span class="p">:</span> <span class="n">NoteService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_reminders</span><span class="p">:</span> <span class="n">ReminderService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_webhooks</span><span class="p">:</span> <span class="n">WebhookService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_interactions</span><span class="p">:</span> <span class="n">InteractionService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span><span class="p">:</span> <span class="n">FieldService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_field_values</span><span class="p">:</span> <span class="n">FieldValueService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_field_value_changes</span><span class="p">:</span> <span class="n">FieldValueChangesService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_files</span><span class="p">:</span> <span class="n">EntityFileService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_relationships</span><span class="p">:</span> <span class="n">RelationshipStrengthService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_auth</span><span class="p">:</span> <span class="n">AuthService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_rate_limits</span><span class="p">:</span> <span class="n">RateLimitService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="affinity.Affinity.clear_cache" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">clear_cache</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#affinity.Affinity.clear_cache" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Clear the response cache.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">clear_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clear the response cache.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">cache</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="affinity.Affinity.close" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">close</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#affinity.Affinity.close" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Close the HTTP client and release resources.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Close the HTTP client and release resources.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="affinity.Affinity.from_env" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_env</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">env_var</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">_DEFAULT_API_KEY_ENV_VAR</span><span class="p">,</span> <span class="n">load_dotenv</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">dotenv_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">dotenv_override</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">BaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">async_transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncBaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">policies</span><span class="p">:</span> <span class="n">Policies</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">on_event</span><span class="p">:</span> <span class="n">AnyEventHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hook_error_policy</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;swallow&#39;</span><span class="p">,</span> <span class="s1">&#39;raise&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;swallow&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Affinity</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#affinity.Affinity.from_env" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Create a client using an API key from the environment.</p>
<p>By default, reads <code>AFFINITY_API_KEY</code>. For local development, you can optionally
load a <code>.env</code> file (requires <code>python-dotenv</code>).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_env</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">env_var</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">_DEFAULT_API_KEY_ENV_VAR</span><span class="p">,</span>
    <span class="n">load_dotenv</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">dotenv_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">dotenv_override</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">BaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">async_transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncBaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">policies</span><span class="p">:</span> <span class="n">Policies</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">on_event</span><span class="p">:</span> <span class="n">AnyEventHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hook_error_policy</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;swallow&quot;</span><span class="p">,</span> <span class="s2">&quot;raise&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;swallow&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Affinity</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a client using an API key from the environment.</span>

<span class="sd">    By default, reads `AFFINITY_API_KEY`. For local development, you can optionally</span>
<span class="sd">    load a `.env` file (requires `python-dotenv`).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">api_key</span> <span class="o">=</span> <span class="n">_api_key_from_env</span><span class="p">(</span>
        <span class="n">env_var</span><span class="o">=</span><span class="n">env_var</span><span class="p">,</span>
        <span class="n">load_dotenv</span><span class="o">=</span><span class="n">load_dotenv</span><span class="p">,</span>
        <span class="n">dotenv_path</span><span class="o">=</span><span class="n">dotenv_path</span><span class="p">,</span>
        <span class="n">dotenv_override</span><span class="o">=</span><span class="n">dotenv_override</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span>
        <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span>
        <span class="n">async_transport</span><span class="o">=</span><span class="n">async_transport</span><span class="p">,</span>
        <span class="n">policies</span><span class="o">=</span><span class="n">policies</span><span class="p">,</span>
        <span class="n">on_event</span><span class="o">=</span><span class="n">on_event</span><span class="p">,</span>
        <span class="n">hook_error_policy</span><span class="o">=</span><span class="n">hook_error_policy</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="affinity.Affinity.whoami" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">whoami</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">WhoAmI</span></code>

<a href="#affinity.Affinity.whoami" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Convenience wrapper for <code>client.auth.whoami()</code>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">whoami</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WhoAmI</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convenience wrapper for `client.auth.whoami()`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">whoami</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="asyncaffinity"><code>AsyncAffinity</code><a class="headerlink" href="#asyncaffinity" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<a id="affinity.AsyncAffinity"></a>
    <div class="doc doc-contents first">



        <p>Asynchronous Affinity API client.</p>
<p>Same interface as Affinity but with async/await support.</p>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">with</span> <span class="n">AsyncAffinity</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;your-key&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">company</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">companies</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">company</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</code></pre></div>
</details>







              <details class="mkdocstrings-source">
                <summary>Source code in <code>affinity/client.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AsyncAffinity</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Asynchronous Affinity API client.</span>

<span class="sd">    Same interface as Affinity but with async/await support.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        async with AsyncAffinity(api_key=&quot;your-key&quot;) as client:</span>
<span class="sd">            async for company in client.companies.all():</span>
<span class="sd">                print(company.name)</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">v1_base_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">V1_BASE_URL</span><span class="p">,</span>
        <span class="n">v2_base_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">V2_BASE_URL</span><span class="p">,</span>
        <span class="n">v1_auth_mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;bearer&quot;</span><span class="p">,</span> <span class="s2">&quot;basic&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bearer&quot;</span><span class="p">,</span>
        <span class="n">transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">BaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">async_transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncBaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enable_beta_endpoints</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">allow_insecure_download_redirects</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">expected_v2_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">30.0</span><span class="p">,</span>
        <span class="n">max_retries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
        <span class="n">enable_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">cache_ttl</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
        <span class="n">log_requests</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">on_request</span><span class="p">:</span> <span class="n">RequestHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">on_response</span><span class="p">:</span> <span class="n">ResponseHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">on_error</span><span class="p">:</span> <span class="n">ErrorHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">on_event</span><span class="p">:</span> <span class="n">AnyEventHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">hook_error_policy</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;swallow&quot;</span><span class="p">,</span> <span class="s2">&quot;raise&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;swallow&quot;</span><span class="p">,</span>
        <span class="n">policies</span><span class="p">:</span> <span class="n">Policies</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the async Affinity client.</span>

<span class="sd">        Args:</span>
<span class="sd">            api_key: Your Affinity API key</span>
<span class="sd">            v1_base_url: V1 API base URL (default: https://api.affinity.co)</span>
<span class="sd">            v2_base_url: V2 API base URL (default: https://api.affinity.co/v2)</span>
<span class="sd">            v1_auth_mode: Auth mode for V1 API (&quot;bearer&quot; or &quot;basic&quot;)</span>
<span class="sd">            transport: Optional `httpx` transport (advanced; useful for mocking in tests)</span>
<span class="sd">            async_transport: Optional async `httpx` transport (advanced; useful for mocking in</span>
<span class="sd">                tests)</span>
<span class="sd">            enable_beta_endpoints: Enable beta V2 endpoints</span>
<span class="sd">            allow_insecure_download_redirects: Allow `http://` redirects for file downloads.</span>
<span class="sd">                Not recommended; prefer HTTPS-only downloads.</span>
<span class="sd">            expected_v2_version: Expected V2 API version for diagnostics (e.g.,</span>
<span class="sd">                &quot;2024-01-01&quot;). Used to detect version compatibility issues.</span>
<span class="sd">                See TR-015.</span>
<span class="sd">            timeout: Request timeout in seconds</span>
<span class="sd">            max_retries: Maximum retries for rate-limited requests</span>
<span class="sd">            enable_cache: Enable response caching for field metadata</span>
<span class="sd">            cache_ttl: Cache TTL in seconds</span>
<span class="sd">            log_requests: Log all HTTP requests (for debugging)</span>
<span class="sd">            on_request: Hook called before each request (DX-008)</span>
<span class="sd">            on_response: Hook called after each response (DX-008)</span>
<span class="sd">            on_error: Hook called when a request raises (DX-008)</span>
<span class="sd">            on_event: Event hook called for request/response lifecycle events (DX-008)</span>
<span class="sd">            hook_error_policy: What to do if hooks raise (&quot;swallow&quot; or &quot;raise&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">ClientConfig</span><span class="p">(</span>
            <span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span>
            <span class="n">v1_base_url</span><span class="o">=</span><span class="n">v1_base_url</span><span class="p">,</span>
            <span class="n">v2_base_url</span><span class="o">=</span><span class="n">v2_base_url</span><span class="p">,</span>
            <span class="n">v1_auth_mode</span><span class="o">=</span><span class="n">v1_auth_mode</span><span class="p">,</span>
            <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span>
            <span class="n">async_transport</span><span class="o">=</span><span class="n">async_transport</span><span class="p">,</span>
            <span class="n">enable_beta_endpoints</span><span class="o">=</span><span class="n">enable_beta_endpoints</span><span class="p">,</span>
            <span class="n">allow_insecure_download_redirects</span><span class="o">=</span><span class="n">allow_insecure_download_redirects</span><span class="p">,</span>
            <span class="n">expected_v2_version</span><span class="o">=</span><span class="n">expected_v2_version</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
            <span class="n">max_retries</span><span class="o">=</span><span class="n">max_retries</span><span class="p">,</span>
            <span class="n">enable_cache</span><span class="o">=</span><span class="n">enable_cache</span><span class="p">,</span>
            <span class="n">cache_ttl</span><span class="o">=</span><span class="n">cache_ttl</span><span class="p">,</span>
            <span class="n">log_requests</span><span class="o">=</span><span class="n">log_requests</span><span class="p">,</span>
            <span class="n">on_request</span><span class="o">=</span><span class="n">on_request</span><span class="p">,</span>
            <span class="n">on_response</span><span class="o">=</span><span class="n">on_response</span><span class="p">,</span>
            <span class="n">on_error</span><span class="o">=</span><span class="n">on_error</span><span class="p">,</span>
            <span class="n">on_event</span><span class="o">=</span><span class="n">on_event</span><span class="p">,</span>
            <span class="n">hook_error_policy</span><span class="o">=</span><span class="n">hook_error_policy</span><span class="p">,</span>
            <span class="n">policies</span><span class="o">=</span><span class="n">policies</span> <span class="ow">or</span> <span class="n">Policies</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_http</span> <span class="o">=</span> <span class="n">AsyncHTTPClient</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

        <span class="c1"># Resource management tracking</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entered_context</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_companies</span><span class="p">:</span> <span class="n">AsyncCompanyService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_persons</span><span class="p">:</span> <span class="n">AsyncPersonService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_opportunities</span><span class="p">:</span> <span class="n">AsyncOpportunityService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lists</span><span class="p">:</span> <span class="n">AsyncListService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span><span class="p">:</span> <span class="n">AsyncTaskService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_notes</span><span class="p">:</span> <span class="n">AsyncNoteService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reminders</span><span class="p">:</span> <span class="n">AsyncReminderService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_webhooks</span><span class="p">:</span> <span class="n">AsyncWebhookService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interactions</span><span class="p">:</span> <span class="n">AsyncInteractionService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span><span class="p">:</span> <span class="n">AsyncFieldService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_field_values</span><span class="p">:</span> <span class="n">AsyncFieldValueService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_field_value_changes</span><span class="p">:</span> <span class="n">AsyncFieldValueChangesService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_files</span><span class="p">:</span> <span class="n">AsyncEntityFileService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_relationships</span><span class="p">:</span> <span class="n">AsyncRelationshipStrengthService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_auth</span><span class="p">:</span> <span class="n">AsyncAuthService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rate_limits</span><span class="p">:</span> <span class="n">AsyncRateLimitService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_env</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">env_var</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">_DEFAULT_API_KEY_ENV_VAR</span><span class="p">,</span>
        <span class="n">load_dotenv</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">dotenv_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dotenv_override</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">BaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">async_transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncBaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">policies</span><span class="p">:</span> <span class="n">Policies</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">on_event</span><span class="p">:</span> <span class="n">AnyEventHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">hook_error_policy</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;swallow&quot;</span><span class="p">,</span> <span class="s2">&quot;raise&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;swallow&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncAffinity</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an async client using an API key from the environment.</span>

<span class="sd">        By default, reads `AFFINITY_API_KEY`. For local development, you can optionally</span>
<span class="sd">        load a `.env` file (requires `python-dotenv`).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">api_key</span> <span class="o">=</span> <span class="n">_api_key_from_env</span><span class="p">(</span>
            <span class="n">env_var</span><span class="o">=</span><span class="n">env_var</span><span class="p">,</span>
            <span class="n">load_dotenv</span><span class="o">=</span><span class="n">load_dotenv</span><span class="p">,</span>
            <span class="n">dotenv_path</span><span class="o">=</span><span class="n">dotenv_path</span><span class="p">,</span>
            <span class="n">dotenv_override</span><span class="o">=</span><span class="n">dotenv_override</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span>
            <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span>
            <span class="n">async_transport</span><span class="o">=</span><span class="n">async_transport</span><span class="p">,</span>
            <span class="n">policies</span><span class="o">=</span><span class="n">policies</span><span class="p">,</span>
            <span class="n">on_event</span><span class="o">=</span><span class="n">on_event</span><span class="p">,</span>
            <span class="n">hook_error_policy</span><span class="o">=</span><span class="n">hook_error_policy</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">companies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncCompanyService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Company (organization) operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_companies</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_companies</span> <span class="o">=</span> <span class="n">AsyncCompanyService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_companies</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">persons</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncPersonService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Person (contact) operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_persons</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_persons</span> <span class="o">=</span> <span class="n">AsyncPersonService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_persons</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">opportunities</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncOpportunityService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Opportunity operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_opportunities</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_opportunities</span> <span class="o">=</span> <span class="n">AsyncOpportunityService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_opportunities</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">lists</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncListService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List and list entry operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lists</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lists</span> <span class="o">=</span> <span class="n">AsyncListService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lists</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncTaskService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Long-running task operations (polling, waiting).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span> <span class="o">=</span> <span class="n">AsyncTaskService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">notes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncNoteService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Note operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_notes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_notes</span> <span class="o">=</span> <span class="n">AsyncNoteService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_notes</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">reminders</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncReminderService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reminder operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reminders</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reminders</span> <span class="o">=</span> <span class="n">AsyncReminderService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reminders</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">webhooks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncWebhookService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Webhook subscription operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_webhooks</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_webhooks</span> <span class="o">=</span> <span class="n">AsyncWebhookService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_webhooks</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">interactions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncInteractionService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Interaction operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interactions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_interactions</span> <span class="o">=</span> <span class="n">AsyncInteractionService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interactions</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">fields</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncFieldService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Custom field operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span> <span class="o">=</span> <span class="n">AsyncFieldService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">field_values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncFieldValueService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field value operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_field_values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_field_values</span> <span class="o">=</span> <span class="n">AsyncFieldValueService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_field_values</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">field_value_changes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncFieldValueChangesService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field value change history queries.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_field_value_changes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_field_value_changes</span> <span class="o">=</span> <span class="n">AsyncFieldValueChangesService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_field_value_changes</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncEntityFileService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Entity file operations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_files</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_files</span> <span class="o">=</span> <span class="n">AsyncEntityFileService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_files</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">relationships</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncRelationshipStrengthService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Relationship strength queries.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relationships</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_relationships</span> <span class="o">=</span> <span class="n">AsyncRelationshipStrengthService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relationships</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">auth</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncAuthService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Authentication info.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auth</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_auth</span> <span class="o">=</span> <span class="n">AsyncAuthService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auth</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">rate_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncRateLimitService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Unified rate limit information (version-agnostic).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rate_limits</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rate_limits</span> <span class="o">=</span> <span class="n">AsyncRateLimitService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rate_limits</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncAffinity</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Enter an async context and return this client.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entered_context</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aexit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Exit the async context and close the underlying HTTP client.&quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Close the HTTP client.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Warn if client was not properly closed.</span>

<span class="sd">        NOTE: We intentionally do NOT attempt async cleanup here.</span>
<span class="sd">        asyncio.create_task() in __del__ is unsafe - the task may be garbage</span>
<span class="sd">        collected before completion, leading to resource leaks or errors.</span>
<span class="sd">        Users must use context managers or call close() explicitly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Use getattr to handle case where __init__ failed before setting _closed</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_closed&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_entered_context&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;AsyncAffinity client was not closed. &quot;</span>
                <span class="s2">&quot;Use &#39;async with AsyncAffinity.from_env() as client:&#39; &quot;</span>
                <span class="s2">&quot;or call await client.close() when done.&quot;</span><span class="p">,</span>
                <span class="ne">ResourceWarning</span><span class="p">,</span>
                <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the response cache.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">cache</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">whoami</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WhoAmI</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convenience wrapper for `client.auth.whoami()`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">whoami</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h2 id="affinity.AsyncAffinity.auth" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">auth</span><span class="p">:</span> <span class="n">AsyncAuthService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.AsyncAffinity.auth" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Authentication info.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.AsyncAffinity.companies" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">companies</span><span class="p">:</span> <span class="n">AsyncCompanyService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.AsyncAffinity.companies" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Company (organization) operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.AsyncAffinity.field_value_changes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">field_value_changes</span><span class="p">:</span> <span class="n">AsyncFieldValueChangesService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.AsyncAffinity.field_value_changes" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Field value change history queries.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.AsyncAffinity.field_values" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">field_values</span><span class="p">:</span> <span class="n">AsyncFieldValueService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.AsyncAffinity.field_values" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Field value operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.AsyncAffinity.fields" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fields</span><span class="p">:</span> <span class="n">AsyncFieldService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.AsyncAffinity.fields" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Custom field operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.AsyncAffinity.files" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">files</span><span class="p">:</span> <span class="n">AsyncEntityFileService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.AsyncAffinity.files" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Entity file operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.AsyncAffinity.interactions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">interactions</span><span class="p">:</span> <span class="n">AsyncInteractionService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.AsyncAffinity.interactions" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Interaction operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.AsyncAffinity.lists" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">lists</span><span class="p">:</span> <span class="n">AsyncListService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.AsyncAffinity.lists" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>List and list entry operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.AsyncAffinity.notes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">notes</span><span class="p">:</span> <span class="n">AsyncNoteService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.AsyncAffinity.notes" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Note operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.AsyncAffinity.opportunities" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">opportunities</span><span class="p">:</span> <span class="n">AsyncOpportunityService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.AsyncAffinity.opportunities" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Opportunity operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.AsyncAffinity.persons" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">persons</span><span class="p">:</span> <span class="n">AsyncPersonService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.AsyncAffinity.persons" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Person (contact) operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.AsyncAffinity.rate_limits" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rate_limits</span><span class="p">:</span> <span class="n">AsyncRateLimitService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.AsyncAffinity.rate_limits" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Unified rate limit information (version-agnostic).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.AsyncAffinity.relationships" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">relationships</span><span class="p">:</span> <span class="n">AsyncRelationshipStrengthService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.AsyncAffinity.relationships" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Relationship strength queries.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.AsyncAffinity.reminders" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reminders</span><span class="p">:</span> <span class="n">AsyncReminderService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.AsyncAffinity.reminders" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Reminder operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.AsyncAffinity.tasks" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">tasks</span><span class="p">:</span> <span class="n">AsyncTaskService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.AsyncAffinity.tasks" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Long-running task operations (polling, waiting).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="affinity.AsyncAffinity.webhooks" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">webhooks</span><span class="p">:</span> <span class="n">AsyncWebhookService</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#affinity.AsyncAffinity.webhooks" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Webhook subscription operations.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h2 id="affinity.AsyncAffinity.__aenter__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__aenter__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">AsyncAffinity</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#affinity.AsyncAffinity.__aenter__" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Enter an async context and return this client.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncAffinity</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Enter an async context and return this client.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_entered_context</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="affinity.AsyncAffinity.__aexit__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__aexit__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#affinity.AsyncAffinity.__aexit__" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Exit the async context and close the underlying HTTP client.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aexit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exit the async context and close the underlying HTTP client.&quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="affinity.AsyncAffinity.__del__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__del__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#affinity.AsyncAffinity.__del__" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Warn if client was not properly closed.</p>
<p>NOTE: We intentionally do NOT attempt async cleanup here.
asyncio.create_task() in <strong>del</strong> is unsafe - the task may be garbage
collected before completion, leading to resource leaks or errors.
Users must use context managers or call close() explicitly.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Warn if client was not properly closed.</span>

<span class="sd">    NOTE: We intentionally do NOT attempt async cleanup here.</span>
<span class="sd">    asyncio.create_task() in __del__ is unsafe - the task may be garbage</span>
<span class="sd">    collected before completion, leading to resource leaks or errors.</span>
<span class="sd">    Users must use context managers or call close() explicitly.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Use getattr to handle case where __init__ failed before setting _closed</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_closed&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_entered_context&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;AsyncAffinity client was not closed. &quot;</span>
            <span class="s2">&quot;Use &#39;async with AsyncAffinity.from_env() as client:&#39; &quot;</span>
            <span class="s2">&quot;or call await client.close() when done.&quot;</span><span class="p">,</span>
            <span class="ne">ResourceWarning</span><span class="p">,</span>
            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="affinity.AsyncAffinity.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">v1_base_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">V1_BASE_URL</span><span class="p">,</span> <span class="n">v2_base_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">V2_BASE_URL</span><span class="p">,</span> <span class="n">v1_auth_mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;bearer&#39;</span><span class="p">,</span> <span class="s1">&#39;basic&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bearer&#39;</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">BaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">async_transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncBaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">enable_beta_endpoints</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">allow_insecure_download_redirects</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">expected_v2_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">30.0</span><span class="p">,</span> <span class="n">max_retries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">enable_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">cache_ttl</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span> <span class="n">log_requests</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">on_request</span><span class="p">:</span> <span class="n">RequestHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">on_response</span><span class="p">:</span> <span class="n">ResponseHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">on_error</span><span class="p">:</span> <span class="n">ErrorHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">on_event</span><span class="p">:</span> <span class="n">AnyEventHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hook_error_policy</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;swallow&#39;</span><span class="p">,</span> <span class="s1">&#39;raise&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;swallow&#39;</span><span class="p">,</span> <span class="n">policies</span><span class="p">:</span> <span class="n">Policies</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

<a href="#affinity.AsyncAffinity.__init__" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Initialize the async Affinity client.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>api_key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Your Affinity API key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>v1_base_url</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>V1 API base URL (default: https://api.affinity.co)</p>
              </div>
            </td>
            <td>
                  <code><span title="affinity.models.types.V1_BASE_URL">V1_BASE_URL</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>v2_base_url</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>V2 API base URL (default: https://api.affinity.co/v2)</p>
              </div>
            </td>
            <td>
                  <code><span title="affinity.models.types.V2_BASE_URL">V2_BASE_URL</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>v1_auth_mode</code>
            </td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;bearer&#39;, &#39;basic&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Auth mode for V1 API ("bearer" or "basic")</p>
              </div>
            </td>
            <td>
                  <code>&#39;bearer&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>transport</code>
            </td>
            <td>
                  <code><span title="httpx.BaseTransport">BaseTransport</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional <code>httpx</code> transport (advanced; useful for mocking in tests)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>async_transport</code>
            </td>
            <td>
                  <code><span title="httpx.AsyncBaseTransport">AsyncBaseTransport</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional async <code>httpx</code> transport (advanced; useful for mocking in
tests)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>enable_beta_endpoints</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Enable beta V2 endpoints</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>allow_insecure_download_redirects</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Allow <code>http://</code> redirects for file downloads.
Not recommended; prefer HTTPS-only downloads.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expected_v2_version</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Expected V2 API version for diagnostics (e.g.,
"2024-01-01"). Used to detect version compatibility issues.
See TR-015.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Request timeout in seconds</p>
              </div>
            </td>
            <td>
                  <code>30.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_retries</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum retries for rate-limited requests</p>
              </div>
            </td>
            <td>
                  <code>3</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>enable_cache</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Enable response caching for field metadata</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cache_ttl</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Cache TTL in seconds</p>
              </div>
            </td>
            <td>
                  <code>300.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>log_requests</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Log all HTTP requests (for debugging)</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>on_request</code>
            </td>
            <td>
                  <code><span title="affinity.hooks.RequestHook">RequestHook</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Hook called before each request (DX-008)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>on_response</code>
            </td>
            <td>
                  <code><span title="affinity.hooks.ResponseHook">ResponseHook</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Hook called after each response (DX-008)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>on_error</code>
            </td>
            <td>
                  <code><span title="affinity.hooks.ErrorHook">ErrorHook</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Hook called when a request raises (DX-008)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>on_event</code>
            </td>
            <td>
                  <code><span title="affinity.hooks.AnyEventHook">AnyEventHook</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Event hook called for request/response lifecycle events (DX-008)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hook_error_policy</code>
            </td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;swallow&#39;, &#39;raise&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>What to do if hooks raise ("swallow" or "raise")</p>
              </div>
            </td>
            <td>
                  <code>&#39;swallow&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">v1_base_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">V1_BASE_URL</span><span class="p">,</span>
    <span class="n">v2_base_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">V2_BASE_URL</span><span class="p">,</span>
    <span class="n">v1_auth_mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;bearer&quot;</span><span class="p">,</span> <span class="s2">&quot;basic&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bearer&quot;</span><span class="p">,</span>
    <span class="n">transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">BaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">async_transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncBaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_beta_endpoints</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">allow_insecure_download_redirects</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">expected_v2_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">30.0</span><span class="p">,</span>
    <span class="n">max_retries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">enable_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">cache_ttl</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
    <span class="n">log_requests</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">on_request</span><span class="p">:</span> <span class="n">RequestHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">on_response</span><span class="p">:</span> <span class="n">ResponseHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">on_error</span><span class="p">:</span> <span class="n">ErrorHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">on_event</span><span class="p">:</span> <span class="n">AnyEventHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hook_error_policy</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;swallow&quot;</span><span class="p">,</span> <span class="s2">&quot;raise&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;swallow&quot;</span><span class="p">,</span>
    <span class="n">policies</span><span class="p">:</span> <span class="n">Policies</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the async Affinity client.</span>

<span class="sd">    Args:</span>
<span class="sd">        api_key: Your Affinity API key</span>
<span class="sd">        v1_base_url: V1 API base URL (default: https://api.affinity.co)</span>
<span class="sd">        v2_base_url: V2 API base URL (default: https://api.affinity.co/v2)</span>
<span class="sd">        v1_auth_mode: Auth mode for V1 API (&quot;bearer&quot; or &quot;basic&quot;)</span>
<span class="sd">        transport: Optional `httpx` transport (advanced; useful for mocking in tests)</span>
<span class="sd">        async_transport: Optional async `httpx` transport (advanced; useful for mocking in</span>
<span class="sd">            tests)</span>
<span class="sd">        enable_beta_endpoints: Enable beta V2 endpoints</span>
<span class="sd">        allow_insecure_download_redirects: Allow `http://` redirects for file downloads.</span>
<span class="sd">            Not recommended; prefer HTTPS-only downloads.</span>
<span class="sd">        expected_v2_version: Expected V2 API version for diagnostics (e.g.,</span>
<span class="sd">            &quot;2024-01-01&quot;). Used to detect version compatibility issues.</span>
<span class="sd">            See TR-015.</span>
<span class="sd">        timeout: Request timeout in seconds</span>
<span class="sd">        max_retries: Maximum retries for rate-limited requests</span>
<span class="sd">        enable_cache: Enable response caching for field metadata</span>
<span class="sd">        cache_ttl: Cache TTL in seconds</span>
<span class="sd">        log_requests: Log all HTTP requests (for debugging)</span>
<span class="sd">        on_request: Hook called before each request (DX-008)</span>
<span class="sd">        on_response: Hook called after each response (DX-008)</span>
<span class="sd">        on_error: Hook called when a request raises (DX-008)</span>
<span class="sd">        on_event: Event hook called for request/response lifecycle events (DX-008)</span>
<span class="sd">        hook_error_policy: What to do if hooks raise (&quot;swallow&quot; or &quot;raise&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">ClientConfig</span><span class="p">(</span>
        <span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span>
        <span class="n">v1_base_url</span><span class="o">=</span><span class="n">v1_base_url</span><span class="p">,</span>
        <span class="n">v2_base_url</span><span class="o">=</span><span class="n">v2_base_url</span><span class="p">,</span>
        <span class="n">v1_auth_mode</span><span class="o">=</span><span class="n">v1_auth_mode</span><span class="p">,</span>
        <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span>
        <span class="n">async_transport</span><span class="o">=</span><span class="n">async_transport</span><span class="p">,</span>
        <span class="n">enable_beta_endpoints</span><span class="o">=</span><span class="n">enable_beta_endpoints</span><span class="p">,</span>
        <span class="n">allow_insecure_download_redirects</span><span class="o">=</span><span class="n">allow_insecure_download_redirects</span><span class="p">,</span>
        <span class="n">expected_v2_version</span><span class="o">=</span><span class="n">expected_v2_version</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
        <span class="n">max_retries</span><span class="o">=</span><span class="n">max_retries</span><span class="p">,</span>
        <span class="n">enable_cache</span><span class="o">=</span><span class="n">enable_cache</span><span class="p">,</span>
        <span class="n">cache_ttl</span><span class="o">=</span><span class="n">cache_ttl</span><span class="p">,</span>
        <span class="n">log_requests</span><span class="o">=</span><span class="n">log_requests</span><span class="p">,</span>
        <span class="n">on_request</span><span class="o">=</span><span class="n">on_request</span><span class="p">,</span>
        <span class="n">on_response</span><span class="o">=</span><span class="n">on_response</span><span class="p">,</span>
        <span class="n">on_error</span><span class="o">=</span><span class="n">on_error</span><span class="p">,</span>
        <span class="n">on_event</span><span class="o">=</span><span class="n">on_event</span><span class="p">,</span>
        <span class="n">hook_error_policy</span><span class="o">=</span><span class="n">hook_error_policy</span><span class="p">,</span>
        <span class="n">policies</span><span class="o">=</span><span class="n">policies</span> <span class="ow">or</span> <span class="n">Policies</span><span class="p">(),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_http</span> <span class="o">=</span> <span class="n">AsyncHTTPClient</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

    <span class="c1"># Resource management tracking</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_entered_context</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_companies</span><span class="p">:</span> <span class="n">AsyncCompanyService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_persons</span><span class="p">:</span> <span class="n">AsyncPersonService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_opportunities</span><span class="p">:</span> <span class="n">AsyncOpportunityService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_lists</span><span class="p">:</span> <span class="n">AsyncListService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span><span class="p">:</span> <span class="n">AsyncTaskService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_notes</span><span class="p">:</span> <span class="n">AsyncNoteService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_reminders</span><span class="p">:</span> <span class="n">AsyncReminderService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_webhooks</span><span class="p">:</span> <span class="n">AsyncWebhookService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_interactions</span><span class="p">:</span> <span class="n">AsyncInteractionService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span><span class="p">:</span> <span class="n">AsyncFieldService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_field_values</span><span class="p">:</span> <span class="n">AsyncFieldValueService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_field_value_changes</span><span class="p">:</span> <span class="n">AsyncFieldValueChangesService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_files</span><span class="p">:</span> <span class="n">AsyncEntityFileService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_relationships</span><span class="p">:</span> <span class="n">AsyncRelationshipStrengthService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_auth</span><span class="p">:</span> <span class="n">AsyncAuthService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_rate_limits</span><span class="p">:</span> <span class="n">AsyncRateLimitService</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="affinity.AsyncAffinity.clear_cache" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">clear_cache</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#affinity.AsyncAffinity.clear_cache" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Clear the response cache.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">clear_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clear the response cache.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">cache</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="affinity.AsyncAffinity.close" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">close</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#affinity.AsyncAffinity.close" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Close the HTTP client.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Close the HTTP client.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="affinity.AsyncAffinity.from_env" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_env</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">env_var</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">_DEFAULT_API_KEY_ENV_VAR</span><span class="p">,</span> <span class="n">load_dotenv</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">dotenv_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">dotenv_override</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">BaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">async_transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncBaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">policies</span><span class="p">:</span> <span class="n">Policies</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">on_event</span><span class="p">:</span> <span class="n">AnyEventHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hook_error_policy</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;swallow&#39;</span><span class="p">,</span> <span class="s1">&#39;raise&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;swallow&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncAffinity</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#affinity.AsyncAffinity.from_env" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Create an async client using an API key from the environment.</p>
<p>By default, reads <code>AFFINITY_API_KEY</code>. For local development, you can optionally
load a <code>.env</code> file (requires <code>python-dotenv</code>).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_env</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">env_var</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">_DEFAULT_API_KEY_ENV_VAR</span><span class="p">,</span>
    <span class="n">load_dotenv</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">dotenv_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">dotenv_override</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">BaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">async_transport</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncBaseTransport</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">policies</span><span class="p">:</span> <span class="n">Policies</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">on_event</span><span class="p">:</span> <span class="n">AnyEventHook</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hook_error_policy</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;swallow&quot;</span><span class="p">,</span> <span class="s2">&quot;raise&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;swallow&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncAffinity</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an async client using an API key from the environment.</span>

<span class="sd">    By default, reads `AFFINITY_API_KEY`. For local development, you can optionally</span>
<span class="sd">    load a `.env` file (requires `python-dotenv`).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">api_key</span> <span class="o">=</span> <span class="n">_api_key_from_env</span><span class="p">(</span>
        <span class="n">env_var</span><span class="o">=</span><span class="n">env_var</span><span class="p">,</span>
        <span class="n">load_dotenv</span><span class="o">=</span><span class="n">load_dotenv</span><span class="p">,</span>
        <span class="n">dotenv_path</span><span class="o">=</span><span class="n">dotenv_path</span><span class="p">,</span>
        <span class="n">dotenv_override</span><span class="o">=</span><span class="n">dotenv_override</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span>
        <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span>
        <span class="n">async_transport</span><span class="o">=</span><span class="n">async_transport</span><span class="p">,</span>
        <span class="n">policies</span><span class="o">=</span><span class="n">policies</span><span class="p">,</span>
        <span class="n">on_event</span><span class="o">=</span><span class="n">on_event</span><span class="p">,</span>
        <span class="n">hook_error_policy</span><span class="o">=</span><span class="n">hook_error_policy</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="affinity.AsyncAffinity.whoami" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">whoami</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">WhoAmI</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#affinity.AsyncAffinity.whoami" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Convenience wrapper for <code>client.auth.whoami()</code>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">whoami</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WhoAmI</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convenience wrapper for `client.auth.whoami()`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">whoami</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Disclaimer: Unofficial community project; not affiliated with, endorsed by, or sponsored by Affinity. "Affinity" and related marks are trademarks of their respective owners. Use of the Affinity API is subject to Affinity Terms of Service.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>