
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Strongly-typed Python SDK for the Affinity CRM API">
      
      
      
      
        <link rel="prev" href="../types/">
      
      
        <link rel="next" href="../query-language/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Filters - Affinity Python SDK</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#filters" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Affinity Python SDK" class="md-header__button md-logo" aria-label="Affinity Python SDK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Affinity Python SDK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Filters
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/yaniv-golan/affinity-sdk" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Affinity Python SDK" class="md-nav__button md-logo" aria-label="Affinity Python SDK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Affinity Python SDK
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/yaniv-golan/affinity-sdk" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    CLI
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    CLI
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/scripting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scripting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JSON Output Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AI Integrations
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    AI Integrations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-integrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCP Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/claude-code-plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Claude Code Plugins & Skills
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Performance tuning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/api-versions-and-routing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API versions & routing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/pagination/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pagination
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/errors-and-retries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Errors & retries
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/rate-limits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rate limits
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/filtering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filtering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/query-command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Query command
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/datetime-handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Datetime handling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/csv-export/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CSV Export (CLI)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/field-types-and-values/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Field types & values
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/field-values/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Field values
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/ids-and-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IDs & types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/sync-vs-async/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sync vs async
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/debugging-hooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Debugging hooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/webhooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Webhooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/opportunity-associations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Opportunity associations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" checked>
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Client
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exceptions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Filters
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Filters
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#affinity.filters" class="md-nav__link">
    <span class="md-ellipsis">
      
        filters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters--using-the-builder-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using the builder (recommended)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters--or-build-complex-filters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Or build complex filters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters--raw-filter-string-escape-hatch-power-users" class="md-nav__link">
    <span class="md-ellipsis">
      
        Raw filter string escape hatch (power users)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.AndExpression" class="md-nav__link">
    <span class="md-ellipsis">
      
        AndExpression
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AndExpression">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affinity.filters.AndExpression.matches" class="md-nav__link">
    <span class="md-ellipsis">
      
        matches
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder" class="md-nav__link">
    <span class="md-ellipsis">
      
        FieldBuilder
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FieldBuilder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.contains" class="md-nav__link">
    <span class="md-ellipsis">
      
        contains
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.ends_with" class="md-nav__link">
    <span class="md-ellipsis">
      
        ends_with
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.equals" class="md-nav__link">
    <span class="md-ellipsis">
      
        equals
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.greater_than" class="md-nav__link">
    <span class="md-ellipsis">
      
        greater_than
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.greater_than_or_equal" class="md-nav__link">
    <span class="md-ellipsis">
      
        greater_than_or_equal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.in_list" class="md-nav__link">
    <span class="md-ellipsis">
      
        in_list
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.is_not_null" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_not_null
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.is_null" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_null
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.less_than" class="md-nav__link">
    <span class="md-ellipsis">
      
        less_than
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.less_than_or_equal" class="md-nav__link">
    <span class="md-ellipsis">
      
        less_than_or_equal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.not_equals" class="md-nav__link">
    <span class="md-ellipsis">
      
        not_equals
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.starts_with" class="md-nav__link">
    <span class="md-ellipsis">
      
        starts_with
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.FieldComparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        FieldComparison
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FieldComparison">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldComparison.matches" class="md-nav__link">
    <span class="md-ellipsis">
      
        matches
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.Filter" class="md-nav__link">
    <span class="md-ellipsis">
      
        Filter
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Filter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affinity.filters.Filter--simple-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        Simple comparison
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.Filter--complex-boolean-logic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complex boolean logic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.Filter--negation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Negation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.Filter.and_" class="md-nav__link">
    <span class="md-ellipsis">
      
        and_
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.Filter.field" class="md-nav__link">
    <span class="md-ellipsis">
      
        field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.Filter.or_" class="md-nav__link">
    <span class="md-ellipsis">
      
        or_
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.Filter.raw" class="md-nav__link">
    <span class="md-ellipsis">
      
        raw
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.FilterExpression" class="md-nav__link">
    <span class="md-ellipsis">
      
        FilterExpression
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FilterExpression">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FilterExpression.__and__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __and__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FilterExpression.__invert__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __invert__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FilterExpression.__or__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __or__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FilterExpression.matches" class="md-nav__link">
    <span class="md-ellipsis">
      
        matches
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FilterExpression.to_string" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_string
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.NotExpression" class="md-nav__link">
    <span class="md-ellipsis">
      
        NotExpression
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NotExpression">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affinity.filters.NotExpression.matches" class="md-nav__link">
    <span class="md-ellipsis">
      
        matches
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.OrExpression" class="md-nav__link">
    <span class="md-ellipsis">
      
        OrExpression
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OrExpression">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affinity.filters.OrExpression.matches" class="md-nav__link">
    <span class="md-ellipsis">
      
        matches
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.RawFilter" class="md-nav__link">
    <span class="md-ellipsis">
      
        RawFilter
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RawFilter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affinity.filters.RawFilter.matches" class="md-nav__link">
    <span class="md-ellipsis">
      
        matches
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.RawToken" class="md-nav__link">
    <span class="md-ellipsis">
      
        RawToken
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.parse" class="md-nav__link">
    <span class="md-ellipsis">
      
        parse
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../query-language/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Query Language
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_7" >
        
          
          <label class="md-nav__link" for="__nav_10_7" id="__nav_10_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Services
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Services
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/companies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Companies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/persons/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Persons
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/opportunities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Opportunities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tasks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_7_6" >
        
          
          <label class="md-nav__link" for="__nav_10_7_6" id="__nav_10_7_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    V1 endpoints
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_10_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_7_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    V1 endpoints
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/reminders/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reminders
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/webhooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Webhooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/interactions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interactions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/fields/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fields
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/field-values/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Field values
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Files
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/relationships/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Relationships
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/v1/auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Auth
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#affinity.filters" class="md-nav__link">
    <span class="md-ellipsis">
      
        filters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters--using-the-builder-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using the builder (recommended)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters--or-build-complex-filters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Or build complex filters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters--raw-filter-string-escape-hatch-power-users" class="md-nav__link">
    <span class="md-ellipsis">
      
        Raw filter string escape hatch (power users)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.AndExpression" class="md-nav__link">
    <span class="md-ellipsis">
      
        AndExpression
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AndExpression">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affinity.filters.AndExpression.matches" class="md-nav__link">
    <span class="md-ellipsis">
      
        matches
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder" class="md-nav__link">
    <span class="md-ellipsis">
      
        FieldBuilder
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FieldBuilder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.contains" class="md-nav__link">
    <span class="md-ellipsis">
      
        contains
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.ends_with" class="md-nav__link">
    <span class="md-ellipsis">
      
        ends_with
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.equals" class="md-nav__link">
    <span class="md-ellipsis">
      
        equals
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.greater_than" class="md-nav__link">
    <span class="md-ellipsis">
      
        greater_than
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.greater_than_or_equal" class="md-nav__link">
    <span class="md-ellipsis">
      
        greater_than_or_equal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.in_list" class="md-nav__link">
    <span class="md-ellipsis">
      
        in_list
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.is_not_null" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_not_null
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.is_null" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_null
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.less_than" class="md-nav__link">
    <span class="md-ellipsis">
      
        less_than
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.less_than_or_equal" class="md-nav__link">
    <span class="md-ellipsis">
      
        less_than_or_equal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.not_equals" class="md-nav__link">
    <span class="md-ellipsis">
      
        not_equals
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldBuilder.starts_with" class="md-nav__link">
    <span class="md-ellipsis">
      
        starts_with
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.FieldComparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        FieldComparison
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FieldComparison">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FieldComparison.matches" class="md-nav__link">
    <span class="md-ellipsis">
      
        matches
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.Filter" class="md-nav__link">
    <span class="md-ellipsis">
      
        Filter
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Filter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affinity.filters.Filter--simple-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        Simple comparison
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.Filter--complex-boolean-logic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complex boolean logic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.Filter--negation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Negation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.Filter.and_" class="md-nav__link">
    <span class="md-ellipsis">
      
        and_
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.Filter.field" class="md-nav__link">
    <span class="md-ellipsis">
      
        field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.Filter.or_" class="md-nav__link">
    <span class="md-ellipsis">
      
        or_
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.Filter.raw" class="md-nav__link">
    <span class="md-ellipsis">
      
        raw
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.FilterExpression" class="md-nav__link">
    <span class="md-ellipsis">
      
        FilterExpression
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FilterExpression">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FilterExpression.__and__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __and__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FilterExpression.__invert__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __invert__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FilterExpression.__or__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __or__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FilterExpression.matches" class="md-nav__link">
    <span class="md-ellipsis">
      
        matches
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#affinity.filters.FilterExpression.to_string" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_string
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.NotExpression" class="md-nav__link">
    <span class="md-ellipsis">
      
        NotExpression
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NotExpression">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affinity.filters.NotExpression.matches" class="md-nav__link">
    <span class="md-ellipsis">
      
        matches
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.OrExpression" class="md-nav__link">
    <span class="md-ellipsis">
      
        OrExpression
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OrExpression">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affinity.filters.OrExpression.matches" class="md-nav__link">
    <span class="md-ellipsis">
      
        matches
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.RawFilter" class="md-nav__link">
    <span class="md-ellipsis">
      
        RawFilter
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RawFilter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affinity.filters.RawFilter.matches" class="md-nav__link">
    <span class="md-ellipsis">
      
        matches
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.RawToken" class="md-nav__link">
    <span class="md-ellipsis">
      
        RawToken
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#affinity.filters.parse" class="md-nav__link">
    <span class="md-ellipsis">
      
        parse
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="filters">Filters<a class="headerlink" href="#filters" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<a id="affinity.filters"></a>
    <div class="doc doc-contents first">

        <p>Filter builder for V2 API filtering support.</p>
<p>Provides a type-safe, Pythonic way to build filter expressions for V2 list endpoints.
The builder handles proper escaping and quoting of user inputs.</p>


<details class="example" open>
  <summary>Example</summary>
  <p>from affinity.filters import Filter, F</p>
<h2 id="affinity.filters--using-the-builder-recommended">Using the builder (recommended)<a class="headerlink" href="#affinity.filters--using-the-builder-recommended" title="Permanent link">&para;</a></h2>
<p>filter = (
    F.field("name").contains("Acme") &amp;
    F.field("status").equals("Active")
)
companies = client.companies.list(filter=filter)</p>
<h2 id="affinity.filters--or-build-complex-filters">Or build complex filters<a class="headerlink" href="#affinity.filters--or-build-complex-filters" title="Permanent link">&para;</a></h2>
<p>filter = (
    (F.field("name").contains("Corp") | F.field("name").contains("Inc")) &amp;
    ~F.field("archived").equals(True)
)</p>
<h2 id="affinity.filters--raw-filter-string-escape-hatch-power-users">Raw filter string escape hatch (power users)<a class="headerlink" href="#affinity.filters--raw-filter-string-escape-hatch-power-users" title="Permanent link">&para;</a></h2>
<p>companies = client.companies.list(filter='name =~ "Acme"')</p>
</details>









<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="affinity.filters.AndExpression" class="doc doc-heading">
            <code>AndExpression</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#affinity.filters.AndExpression" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="FilterExpression (affinity.filters.FilterExpression)" href="#affinity.filters.FilterExpression">FilterExpression</a></code></p>



        <p><code>&amp;</code> combination of two expressions.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>affinity/filters.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AndExpression</span><span class="p">(</span><span class="n">FilterExpression</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;`&amp;` combination of two expressions.&quot;&quot;&quot;</span>

    <span class="n">left</span><span class="p">:</span> <span class="n">FilterExpression</span>
    <span class="n">right</span><span class="p">:</span> <span class="n">FilterExpression</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">left_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span>
        <span class="n">right_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span>
        <span class="c1"># Wrap in parentheses for correct precedence</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">left_str</span><span class="si">}</span><span class="s2">) &amp; (</span><span class="si">{</span><span class="n">right_str</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Both sides must match.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="affinity.filters.AndExpression.matches" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">matches</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

<a href="#affinity.filters.AndExpression.matches" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Both sides must match.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Both sides must match.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="affinity.filters.FieldBuilder" class="doc doc-heading">
            <code>FieldBuilder</code>


<a href="#affinity.filters.FieldBuilder" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">



        <p>Builder for field-based filter expressions.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>affinity/filters.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FieldBuilder</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Builder for field-based filter expressions.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span> <span class="o">=</span> <span class="n">field_name</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">equals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field equals value (exact match).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">not_equals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field does not equal value.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;!=&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field contains substring (case-insensitive).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;=~&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">starts_with</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field starts with prefix.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;=^&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">ends_with</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field ends with suffix.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;=$&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">greater_than</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="n">datetime</span> <span class="o">|</span> <span class="n">date</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field is greater than value.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">greater_than_or_equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="n">datetime</span> <span class="o">|</span> <span class="n">date</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field is greater than or equal to value.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;&gt;=&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">less_than</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="n">datetime</span> <span class="o">|</span> <span class="n">date</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field is less than value.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;&lt;&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">less_than_or_equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="n">datetime</span> <span class="o">|</span> <span class="n">date</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field is less than or equal to value.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_null</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field is null.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;!=&quot;</span><span class="p">,</span> <span class="n">RawToken</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_not_null</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field is not null.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="n">RawToken</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">in_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field value is in the given list (OR of equals).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">values</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;in_list() requires at least one value&quot;</span><span class="p">)</span>
        <span class="n">expressions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">FilterExpression</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>
        <span class="n">result</span><span class="p">:</span> <span class="n">FilterExpression</span> <span class="o">=</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">|</span> <span class="n">expr</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FieldBuilder.contains" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">contains</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span></code>

<a href="#affinity.filters.FieldBuilder.contains" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Field contains substring (case-insensitive).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field contains substring (case-insensitive).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;=~&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FieldBuilder.ends_with" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ends_with</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span></code>

<a href="#affinity.filters.FieldBuilder.ends_with" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Field ends with suffix.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">ends_with</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field ends with suffix.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;=$&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FieldBuilder.equals" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">equals</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span></code>

<a href="#affinity.filters.FieldBuilder.equals" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Field equals value (exact match).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">equals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field equals value (exact match).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FieldBuilder.greater_than" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">greater_than</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="n">datetime</span> <span class="o">|</span> <span class="n">date</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span></code>

<a href="#affinity.filters.FieldBuilder.greater_than" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Field is greater than value.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">greater_than</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="n">datetime</span> <span class="o">|</span> <span class="n">date</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field is greater than value.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FieldBuilder.greater_than_or_equal" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">greater_than_or_equal</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="n">datetime</span> <span class="o">|</span> <span class="n">date</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span></code>

<a href="#affinity.filters.FieldBuilder.greater_than_or_equal" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Field is greater than or equal to value.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">greater_than_or_equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="n">datetime</span> <span class="o">|</span> <span class="n">date</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field is greater than or equal to value.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;&gt;=&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FieldBuilder.in_list" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">in_list</span><span class="p">(</span><span class="n">values</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span></code>

<a href="#affinity.filters.FieldBuilder.in_list" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Field value is in the given list (OR of equals).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">in_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field value is in the given list (OR of equals).&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">values</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;in_list() requires at least one value&quot;</span><span class="p">)</span>
    <span class="n">expressions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">FilterExpression</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>
    <span class="n">result</span><span class="p">:</span> <span class="n">FilterExpression</span> <span class="o">=</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">|</span> <span class="n">expr</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FieldBuilder.is_not_null" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_not_null</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span></code>

<a href="#affinity.filters.FieldBuilder.is_not_null" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Field is not null.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_not_null</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field is not null.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="n">RawToken</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FieldBuilder.is_null" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_null</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span></code>

<a href="#affinity.filters.FieldBuilder.is_null" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Field is null.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_null</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field is null.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;!=&quot;</span><span class="p">,</span> <span class="n">RawToken</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FieldBuilder.less_than" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">less_than</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="n">datetime</span> <span class="o">|</span> <span class="n">date</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span></code>

<a href="#affinity.filters.FieldBuilder.less_than" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Field is less than value.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">less_than</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="n">datetime</span> <span class="o">|</span> <span class="n">date</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field is less than value.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;&lt;&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FieldBuilder.less_than_or_equal" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">less_than_or_equal</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="n">datetime</span> <span class="o">|</span> <span class="n">date</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span></code>

<a href="#affinity.filters.FieldBuilder.less_than_or_equal" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Field is less than or equal to value.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">less_than_or_equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="n">datetime</span> <span class="o">|</span> <span class="n">date</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field is less than or equal to value.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FieldBuilder.not_equals" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">not_equals</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span></code>

<a href="#affinity.filters.FieldBuilder.not_equals" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Field does not equal value.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">not_equals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field does not equal value.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;!=&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FieldBuilder.starts_with" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">starts_with</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span></code>

<a href="#affinity.filters.FieldBuilder.starts_with" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Field starts with prefix.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">starts_with</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldComparison</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field starts with prefix.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FieldComparison</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field_name</span><span class="p">,</span> <span class="s2">&quot;=^&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="affinity.filters.FieldComparison" class="doc doc-heading">
            <code>FieldComparison</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#affinity.filters.FieldComparison" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="FilterExpression (affinity.filters.FilterExpression)" href="#affinity.filters.FilterExpression">FilterExpression</a></code></p>



        <p>A comparison operation on a field.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>affinity/filters.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">FieldComparison</span><span class="p">(</span><span class="n">FilterExpression</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A comparison operation on a field.&quot;&quot;&quot;</span>

    <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">operator</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">Any</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">formatted_value</span> <span class="o">=</span> <span class="n">_format_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">field_name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">operator</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">formatted_value</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Evaluate field comparison against an entity dict.</span>

<span class="sd">        For multi-select dropdown fields (arrays), the operators have special semantics:</span>
<span class="sd">        - `=` with scalar: checks if value is IN the array (membership)</span>
<span class="sd">        - `=` with list: checks set equality (order-insensitive)</span>
<span class="sd">        - `!=` with scalar: checks if value is NOT in the array</span>
<span class="sd">        - `!=` with list: checks set inequality</span>
<span class="sd">        - `=~` (contains): checks if any array element contains the substring</span>
<span class="sd">        - `=^` (starts_with): checks if any array element starts with the prefix</span>
<span class="sd">        - `=$` (ends_with): checks if any array element ends with the suffix</span>
<span class="sd">        - `&gt;`, `&gt;=`, `&lt;`, `&lt;=`: numeric/date comparisons</span>

<span class="sd">        Uses the shared compare module for consistent behavior across SDK and Query tool.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">field_value</span> <span class="o">=</span> <span class="n">_get_entity_value</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_name</span><span class="p">)</span>

        <span class="c1"># Normalize dropdown dicts and multi-select arrays</span>
        <span class="n">field_value</span> <span class="o">=</span> <span class="n">normalize_value</span><span class="p">(</span><span class="n">field_value</span><span class="p">)</span>

        <span class="c1"># Handle NULL checks (Affinity convention: =* means NOT NULL, !=* means IS NULL)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">RawToken</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">token</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;=&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">compare_values</span><span class="p">(</span><span class="n">field_value</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;is_not_null&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;!=&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">compare_values</span><span class="p">(</span><span class="n">field_value</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;is_null&quot;</span><span class="p">)</span>

        <span class="c1"># Extract target value</span>
        <span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">RawToken</span><span class="p">)</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">token</span>

        <span class="c1"># Map SDK operator symbol to canonical operator name</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">canonical_op</span> <span class="o">=</span> <span class="n">map_operator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operator</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unsupported operator &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">operator</span><span class="si">}</span><span class="s2">&#39; for client-side matching. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Supported operators: =, !=, =~, =^, =$, &gt;, &gt;=, &lt;, &lt;=, &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;contains, starts_with, ends_with, gt, gte, lt, lte, &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;is null, is not null, is empty, &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;in, between, has_any, has_all, contains_any, contains_all&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="kc">None</span>

        <span class="k">return</span> <span class="n">compare_values</span><span class="p">(</span><span class="n">field_value</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">canonical_op</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FieldComparison.matches" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">matches</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

<a href="#affinity.filters.FieldComparison.matches" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Evaluate field comparison against an entity dict.</p>
<p>For multi-select dropdown fields (arrays), the operators have special semantics:
- <code>=</code> with scalar: checks if value is IN the array (membership)
- <code>=</code> with list: checks set equality (order-insensitive)
- <code>!=</code> with scalar: checks if value is NOT in the array
- <code>!=</code> with list: checks set inequality
- <code>=~</code> (contains): checks if any array element contains the substring
- <code>=^</code> (starts_with): checks if any array element starts with the prefix
- <code>=$</code> (ends_with): checks if any array element ends with the suffix
- <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>: numeric/date comparisons</p>
<p>Uses the shared compare module for consistent behavior across SDK and Query tool.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Evaluate field comparison against an entity dict.</span>

<span class="sd">    For multi-select dropdown fields (arrays), the operators have special semantics:</span>
<span class="sd">    - `=` with scalar: checks if value is IN the array (membership)</span>
<span class="sd">    - `=` with list: checks set equality (order-insensitive)</span>
<span class="sd">    - `!=` with scalar: checks if value is NOT in the array</span>
<span class="sd">    - `!=` with list: checks set inequality</span>
<span class="sd">    - `=~` (contains): checks if any array element contains the substring</span>
<span class="sd">    - `=^` (starts_with): checks if any array element starts with the prefix</span>
<span class="sd">    - `=$` (ends_with): checks if any array element ends with the suffix</span>
<span class="sd">    - `&gt;`, `&gt;=`, `&lt;`, `&lt;=`: numeric/date comparisons</span>

<span class="sd">    Uses the shared compare module for consistent behavior across SDK and Query tool.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">field_value</span> <span class="o">=</span> <span class="n">_get_entity_value</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_name</span><span class="p">)</span>

    <span class="c1"># Normalize dropdown dicts and multi-select arrays</span>
    <span class="n">field_value</span> <span class="o">=</span> <span class="n">normalize_value</span><span class="p">(</span><span class="n">field_value</span><span class="p">)</span>

    <span class="c1"># Handle NULL checks (Affinity convention: =* means NOT NULL, !=* means IS NULL)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">RawToken</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">token</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;=&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">compare_values</span><span class="p">(</span><span class="n">field_value</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;is_not_null&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;!=&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">compare_values</span><span class="p">(</span><span class="n">field_value</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;is_null&quot;</span><span class="p">)</span>

    <span class="c1"># Extract target value</span>
    <span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">RawToken</span><span class="p">)</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">token</span>

    <span class="c1"># Map SDK operator symbol to canonical operator name</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">canonical_op</span> <span class="o">=</span> <span class="n">map_operator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operator</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unsupported operator &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">operator</span><span class="si">}</span><span class="s2">&#39; for client-side matching. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Supported operators: =, !=, =~, =^, =$, &gt;, &gt;=, &lt;, &lt;=, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;contains, starts_with, ends_with, gt, gte, lt, lte, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;is null, is not null, is empty, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;in, between, has_any, has_all, contains_any, contains_all&quot;</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="kc">None</span>

    <span class="k">return</span> <span class="n">compare_values</span><span class="p">(</span><span class="n">field_value</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">canonical_op</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="affinity.filters.Filter" class="doc doc-heading">
            <code>Filter</code>


<a href="#affinity.filters.Filter" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">



        <p>Factory for building filter expressions.</p>


<details class="example" open>
  <summary>Example</summary>
  <h3 id="affinity.filters.Filter--simple-comparison">Simple comparison<a class="headerlink" href="#affinity.filters.Filter--simple-comparison" title="Permanent link">&para;</a></h3>
<p>Filter.field("name").contains("Acme")</p>
<h3 id="affinity.filters.Filter--complex-boolean-logic">Complex boolean logic<a class="headerlink" href="#affinity.filters.Filter--complex-boolean-logic" title="Permanent link">&para;</a></h3>
<p>(Filter.field("status").equals("Active") &amp;
 Filter.field("type").in_list(["customer", "prospect"]))</p>
<h3 id="affinity.filters.Filter--negation">Negation<a class="headerlink" href="#affinity.filters.Filter--negation" title="Permanent link">&para;</a></h3>
<p>~Filter.field("archived").equals(True)</p>
</details>







              <details class="mkdocstrings-source">
                <summary>Source code in <code>affinity/filters.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Filter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Factory for building filter expressions.</span>

<span class="sd">    Example:</span>
<span class="sd">        # Simple comparison</span>
<span class="sd">        Filter.field(&quot;name&quot;).contains(&quot;Acme&quot;)</span>

<span class="sd">        # Complex boolean logic</span>
<span class="sd">        (Filter.field(&quot;status&quot;).equals(&quot;Active&quot;) &amp;</span>
<span class="sd">         Filter.field(&quot;type&quot;).in_list([&quot;customer&quot;, &quot;prospect&quot;]))</span>

<span class="sd">        # Negation</span>
<span class="sd">        ~Filter.field(&quot;archived&quot;).equals(True)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">field</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldBuilder</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start building a filter on a field.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FieldBuilder</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">raw</span><span class="p">(</span><span class="n">expression</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RawFilter</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a raw filter expression (escape hatch).</span>

<span class="sd">        Use this when you need filter syntax not supported by the builder.</span>
<span class="sd">        The expression is passed directly to the API without modification.</span>

<span class="sd">        Args:</span>
<span class="sd">            expression: Raw filter string (e.g., &#39;name =~ &quot;Acme&quot;&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">RawFilter</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">and_</span><span class="p">(</span><span class="o">*</span><span class="n">expressions</span><span class="p">:</span> <span class="n">FilterExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combine multiple expressions with `&amp;`.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">expressions</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;and_() requires at least one expression&quot;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">&amp;</span> <span class="n">expr</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">or_</span><span class="p">(</span><span class="o">*</span><span class="n">expressions</span><span class="p">:</span> <span class="n">FilterExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combine multiple expressions with `|`.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">expressions</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;or_() requires at least one expression&quot;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">|</span> <span class="n">expr</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="affinity.filters.Filter.and_" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">and_</span><span class="p">(</span><span class="o">*</span><span class="n">expressions</span><span class="p">:</span> <span class="n">FilterExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#affinity.filters.Filter.and_" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Combine multiple expressions with <code>&amp;</code>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">and_</span><span class="p">(</span><span class="o">*</span><span class="n">expressions</span><span class="p">:</span> <span class="n">FilterExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Combine multiple expressions with `&amp;`.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">expressions</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;and_() requires at least one expression&quot;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">&amp;</span> <span class="n">expr</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.Filter.field" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">field</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldBuilder</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#affinity.filters.Filter.field" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Start building a filter on a field.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">field</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldBuilder</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Start building a filter on a field.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FieldBuilder</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.Filter.or_" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">or_</span><span class="p">(</span><span class="o">*</span><span class="n">expressions</span><span class="p">:</span> <span class="n">FilterExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#affinity.filters.Filter.or_" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Combine multiple expressions with <code>|</code>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">or_</span><span class="p">(</span><span class="o">*</span><span class="n">expressions</span><span class="p">:</span> <span class="n">FilterExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Combine multiple expressions with `|`.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">expressions</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;or_() requires at least one expression&quot;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">|</span> <span class="n">expr</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.Filter.raw" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">raw</span><span class="p">(</span><span class="n">expression</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RawFilter</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#affinity.filters.Filter.raw" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a raw filter expression (escape hatch).</p>
<p>Use this when you need filter syntax not supported by the builder.
The expression is passed directly to the API without modification.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>expression</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Raw filter string (e.g., 'name =~ "Acme"')</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">raw</span><span class="p">(</span><span class="n">expression</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RawFilter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a raw filter expression (escape hatch).</span>

<span class="sd">    Use this when you need filter syntax not supported by the builder.</span>
<span class="sd">    The expression is passed directly to the API without modification.</span>

<span class="sd">    Args:</span>
<span class="sd">        expression: Raw filter string (e.g., &#39;name =~ &quot;Acme&quot;&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">RawFilter</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="affinity.filters.FilterExpression" class="doc doc-heading">
            <code>FilterExpression</code>


<a href="#affinity.filters.FilterExpression" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>



        <p>Base class for filter expressions.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>affinity/filters.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FilterExpression</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for filter expressions.&quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the expression to a filter string.&quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Evaluate filter against an entity dict (client-side).</span>

<span class="sd">        Used for --expand-filter in list export where filtering happens</span>
<span class="sd">        after fetching data from the API.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__and__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">FilterExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combine two expressions with `&amp;`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">AndExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__or__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">FilterExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combine two expressions with `|`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">OrExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__invert__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Negate the expression with `!`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">NotExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Filter(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span><span class="si">!r}</span><span class="s2">)&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FilterExpression.__and__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__and__</span><span class="p">(</span><span class="n">other</span><span class="p">:</span> <span class="n">FilterExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span></code>

<a href="#affinity.filters.FilterExpression.__and__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Combine two expressions with <code>&amp;</code>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__and__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">FilterExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Combine two expressions with `&amp;`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">AndExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FilterExpression.__invert__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__invert__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span></code>

<a href="#affinity.filters.FilterExpression.__invert__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Negate the expression with <code>!</code>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__invert__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Negate the expression with `!`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">NotExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FilterExpression.__or__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__or__</span><span class="p">(</span><span class="n">other</span><span class="p">:</span> <span class="n">FilterExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span></code>

<a href="#affinity.filters.FilterExpression.__or__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Combine two expressions with <code>|</code>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__or__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">FilterExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Combine two expressions with `|`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">OrExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FilterExpression.matches" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">matches</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#affinity.filters.FilterExpression.matches" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Evaluate filter against an entity dict (client-side).</p>
<p>Used for --expand-filter in list export where filtering happens
after fetching data from the API.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Evaluate filter against an entity dict (client-side).</span>

<span class="sd">    Used for --expand-filter in list export where filtering happens</span>
<span class="sd">    after fetching data from the API.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="affinity.filters.FilterExpression.to_string" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_string</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#affinity.filters.FilterExpression.to_string" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Convert the expression to a filter string.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert the expression to a filter string.&quot;&quot;&quot;</span>
    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="affinity.filters.NotExpression" class="doc doc-heading">
            <code>NotExpression</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#affinity.filters.NotExpression" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="FilterExpression (affinity.filters.FilterExpression)" href="#affinity.filters.FilterExpression">FilterExpression</a></code></p>



        <p><code>!</code> negation of an expression.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>affinity/filters.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">NotExpression</span><span class="p">(</span><span class="n">FilterExpression</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;`!` negation of an expression.&quot;&quot;&quot;</span>

    <span class="n">expr</span><span class="p">:</span> <span class="n">FilterExpression</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;!(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invert the inner expression.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="affinity.filters.NotExpression.matches" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">matches</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

<a href="#affinity.filters.NotExpression.matches" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Invert the inner expression.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Invert the inner expression.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="affinity.filters.OrExpression" class="doc doc-heading">
            <code>OrExpression</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#affinity.filters.OrExpression" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="FilterExpression (affinity.filters.FilterExpression)" href="#affinity.filters.FilterExpression">FilterExpression</a></code></p>



        <p><code>|</code> combination of two expressions.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>affinity/filters.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrExpression</span><span class="p">(</span><span class="n">FilterExpression</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;`|` combination of two expressions.&quot;&quot;&quot;</span>

    <span class="n">left</span><span class="p">:</span> <span class="n">FilterExpression</span>
    <span class="n">right</span><span class="p">:</span> <span class="n">FilterExpression</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">left_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span>
        <span class="n">right_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">left_str</span><span class="si">}</span><span class="s2">) | (</span><span class="si">{</span><span class="n">right_str</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Either side must match.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="affinity.filters.OrExpression.matches" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">matches</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

<a href="#affinity.filters.OrExpression.matches" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Either side must match.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Either side must match.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="affinity.filters.RawFilter" class="doc doc-heading">
            <code>RawFilter</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#affinity.filters.RawFilter" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="FilterExpression (affinity.filters.FilterExpression)" href="#affinity.filters.FilterExpression">FilterExpression</a></code></p>



        <p>A raw filter string (escape hatch for power users).</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>affinity/filters.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RawFilter</span><span class="p">(</span><span class="n">FilterExpression</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw filter string (escape hatch for power users).&quot;&quot;&quot;</span>

    <span class="n">expression</span><span class="p">:</span> <span class="nb">str</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">expression</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;RawFilter cannot be evaluated client-side.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="s2">&quot;RawFilter cannot be evaluated client-side. &quot;</span>
            <span class="s2">&quot;Use structured filter expressions for --expand-filter.&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="affinity.filters.RawFilter.matches" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">matches</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

<a href="#affinity.filters.RawFilter.matches" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>RawFilter cannot be evaluated client-side.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;RawFilter cannot be evaluated client-side.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
        <span class="s2">&quot;RawFilter cannot be evaluated client-side. &quot;</span>
        <span class="s2">&quot;Use structured filter expressions for --expand-filter.&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="affinity.filters.RawToken" class="doc doc-heading">
            <code>RawToken</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#affinity.filters.RawToken" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">



        <p>A raw token inserted into a filter expression without quoting.</p>
<p>Used for special Affinity Filtering Language literals like <code>*</code>.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>affinity/filters.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RawToken</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A raw token inserted into a filter expression without quoting.</span>

<span class="sd">    Used for special Affinity Filtering Language literals like `*`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">token</span><span class="p">:</span> <span class="nb">str</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">












  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="affinity.filters.parse" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">parse</span><span class="p">(</span><span class="n">filter_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span></code>

<a href="#affinity.filters.parse" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Parse a filter string into a FilterExpression AST.</p>
<p>This function converts a human-readable filter string into a structured
FilterExpression that can be used for client-side filtering with matches().</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filter_string</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The filter expression to parse</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="FilterExpression (affinity.filters.FilterExpression)" href="#affinity.filters.FilterExpression">FilterExpression</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A FilterExpression AST representing the filter</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the filter string is invalid</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="s1">&#39;name = &quot;Alice&quot;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="o">.</span><span class="n">matches</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Alice&quot;</span><span class="p">})</span>
<span class="go">True</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="s1">&#39;status = Active | status = Pending&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="o">.</span><span class="n">matches</span><span class="p">({</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;Active&quot;</span><span class="p">})</span>
<span class="go">True</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="s1">&#39;email = *&#39;</span><span class="p">)</span>  <span class="c1"># IS NOT NULL</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="o">.</span><span class="n">matches</span><span class="p">({</span><span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;test@example.com&quot;</span><span class="p">})</span>
<span class="go">True</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="s1">&#39;email != *&#39;</span><span class="p">)</span>  <span class="c1"># IS NULL</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="o">.</span><span class="n">matches</span><span class="p">({</span><span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">})</span>
<span class="go">True</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>affinity/filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span><span class="n">filter_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterExpression</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parse a filter string into a FilterExpression AST.</span>

<span class="sd">    This function converts a human-readable filter string into a structured</span>
<span class="sd">    FilterExpression that can be used for client-side filtering with matches().</span>

<span class="sd">    Args:</span>
<span class="sd">        filter_string: The filter expression to parse</span>

<span class="sd">    Returns:</span>
<span class="sd">        A FilterExpression AST representing the filter</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the filter string is invalid</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; expr = parse(&#39;name = &quot;Alice&quot;&#39;)</span>
<span class="sd">        &gt;&gt;&gt; expr.matches({&quot;name&quot;: &quot;Alice&quot;})</span>
<span class="sd">        True</span>

<span class="sd">        &gt;&gt;&gt; expr = parse(&#39;status = Active | status = Pending&#39;)</span>
<span class="sd">        &gt;&gt;&gt; expr.matches({&quot;status&quot;: &quot;Active&quot;})</span>
<span class="sd">        True</span>

<span class="sd">        &gt;&gt;&gt; expr = parse(&#39;email = *&#39;)  # IS NOT NULL</span>
<span class="sd">        &gt;&gt;&gt; expr.matches({&quot;email&quot;: &quot;test@example.com&quot;})</span>
<span class="sd">        True</span>

<span class="sd">        &gt;&gt;&gt; expr = parse(&#39;email != *&#39;)  # IS NULL</span>
<span class="sd">        &gt;&gt;&gt; expr.matches({&quot;email&quot;: None})</span>
<span class="sd">        True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">filter_string</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">filter_string</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Empty filter expression&quot;</span><span class="p">)</span>

    <span class="n">tokenizer</span> <span class="o">=</span> <span class="n">_Tokenizer</span><span class="p">(</span><span class="n">filter_string</span><span class="p">)</span>
    <span class="n">tokens</span> <span class="o">=</span> <span class="n">tokenizer</span><span class="o">.</span><span class="n">tokenize</span><span class="p">()</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">_Parser</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Disclaimer: Unofficial community project; not affiliated with, endorsed by, or sponsored by Affinity. "Affinity" and related marks are trademarks of their respective owners. Use of the Affinity API is subject to Affinity Terms of Service.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>